<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Algorithm Exercise 2 | 邢鹏飞的博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Algorithm Exercise 2</h1><a id="logo" href="/.">邢鹏飞的博客</a><p class="description">Make a difference</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 主页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Algorithm Exercise 2</h1><div class="post-meta">Oct 28, 2016</div><div class="post-content"><h2 id="11-Detect-Cycle-in-Graph"><a href="#11-Detect-Cycle-in-Graph" class="headerlink" title="11. Detect Cycle in Graph"></a>11. Detect Cycle in Graph</h2><p>Code</p>
<p>需要注意的是需要两个<code>set</code>，一个用来保存全局访问节点，一个用来保存当前路径走过的节点，如果在走路径的时候发现了全局已经访问的节点，则推出此分支的搜索，如果碰到当前路径走过的节点，则证明图中有环。</p>
<p>注意在dfs中要从path visited中移除访问过的节点</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> label;</span><br><span class="line">       HashSet&lt;Node&gt; neighbours;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> label)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.label = label;</span><br><span class="line">           <span class="keyword">this</span>.neighbours = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">detectedCycle</span><span class="params">(ArrayList&lt;Node&gt; graph)</span> </span>&#123;</span><br><span class="line">       HashSet&lt;Node&gt; visited = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (Node node : graph) &#123;</span><br><span class="line">           <span class="keyword">if</span> (visited.contains(node)) <span class="keyword">continue</span>;</span><br><span class="line">           visited.add(node);</span><br><span class="line">           <span class="keyword">if</span> (dfs(node, <span class="keyword">new</span> HashSet&lt;Node&gt;(), visited)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">dfs</span><span class="params">(Node node, HashSet&lt;Node&gt; pathVisited, HashSet&lt;Node&gt; globalVisited)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (pathVisited.contains(node)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       <span class="keyword">if</span> (globalVisited.contains(node)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       pathVisited.add(node);</span><br><span class="line">       globalVisited.add(node);</span><br><span class="line">       <span class="keyword">for</span> (Node neighbour : node.neighbours) &#123;</span><br><span class="line">           <span class="keyword">if</span>(dfs(neighbour, pathVisited, globalVisited)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       pathVisited.remove(node);</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="12-Bipart-Graph"><a href="#12-Bipart-Graph" class="headerlink" title="12. Bipart Graph"></a>12. Bipart Graph</h2><p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">bipartGraph</span><span class="params">(ArrayList&lt;Node&gt; graph)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (graph == <span class="keyword">null</span> || graph.size() &lt; <span class="number">3</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       HashSet&lt;Node&gt; color1 = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       HashSet&lt;Node&gt; color2 = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (Node node : graph) &#123;</span><br><span class="line">           <span class="keyword">if</span> (!color1.contains(node) &amp;&amp; !color2.contains(node)) &#123;</span><br><span class="line">               <span class="keyword">if</span> (paintColor(node, color1, color2) == <span class="keyword">false</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">paintColor</span><span class="params">(Node node, HashSet&lt;Node&gt; color1, HashSet&lt;Node&gt; color2)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (color2.contains(node)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       color1.add(node);</span><br><span class="line">       <span class="keyword">for</span> (Node neighbour : node.neighbours) &#123;</span><br><span class="line">           <span class="keyword">if</span> (color1.contains(neighbour)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">           <span class="keyword">if</span> (paintColor(neighbour, color2, color1) == <span class="keyword">false</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="13-Toggle"><a href="#13-Toggle" class="headerlink" title="13. Toggle"></a>13. Toggle</h2><p>在hashmap中insert和delete时，不要忘记跟新hashmap。</p>
<p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       Toggle toggleInstance = <span class="keyword">new</span> Toggle();</span><br><span class="line">       toggleInstance.toggle(<span class="string">"a"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"b"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"c"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"a"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"c"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"c"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"a"</span>);</span><br><span class="line">       ArrayList&lt;String&gt; result = toggleInstance.getSelectedList();</span><br><span class="line">       <span class="keyword">for</span> (String s : result) &#123;</span><br><span class="line">           System.out.println(s);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">       Node pre, next;</span><br><span class="line">       String val;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Node</span> <span class="params">(String val)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.val = val;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   Node head, tail;</span><br><span class="line">   HashMap&lt;String, Node&gt; mp;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Toggle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       mp = <span class="keyword">new</span> HashMap&lt;String, Node&gt;();</span><br><span class="line">       head = <span class="keyword">new</span> Node(<span class="string">" "</span>);</span><br><span class="line">       tail = <span class="keyword">new</span> Node(<span class="string">" "</span>);</span><br><span class="line">       head.next = tail;</span><br><span class="line">       tail.pre = head;</span><br><span class="line">       head.pre = <span class="keyword">null</span>;</span><br><span class="line">       tail.next = <span class="keyword">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">toggle</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (mp.containsKey(username)) deleteNode(username);</span><br><span class="line">       <span class="keyword">else</span> insertNode(username);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> ArrayList&lt;String&gt; <span class="title">getSelectedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       Node tmp = head.next;</span><br><span class="line">       <span class="keyword">while</span> (tmp != tail) &#123;</span><br><span class="line">           result.add(tmp.val);</span><br><span class="line">           tmp = tmp.next;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteNode</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">       Node cur = mp.get(username);</span><br><span class="line">       cur.pre.next = cur.next;</span><br><span class="line">       cur.next.pre = cur.pre;</span><br><span class="line">       cur = <span class="keyword">null</span>;</span><br><span class="line">       mp.remove(username);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">insertNode</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">       Node insertedNode = <span class="keyword">new</span> Node(username);</span><br><span class="line">       insertedNode.pre = tail.pre;</span><br><span class="line">       insertedNode.next = tail;</span><br><span class="line">       tail.pre.next = insertedNode;</span><br><span class="line">       tail.pre = insertedNode;</span><br><span class="line">       mp.put(username, insertedNode);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="14-find-String-combined-by-given-char"><a href="#14-find-String-combined-by-given-char" class="headerlink" title="14. find String combined by given char"></a>14. find String combined by given char</h2><p>Link: <a href="http://www.1point3acres.com/bbs/thread-156347-1-1.html" target="_blank" rel="noopener">http://www.1point3acres.com/bbs/thread-156347-1-1.html</a><br>因为LZ说待查找的String是million级别的，所以还是需要对给定的String数组进行建Trie，因为考虑假如有1万个String是以10万个a开头的，那么在利用trie数据结构，我们只需要判断一次10万个a是否满足情况，而在没有trie的情况下，我们则需要对每个都需要判断。</p>
<p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] array = &#123;<span class="string">'a'</span>,<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'r'</span>,<span class="string">'t'</span>, <span class="string">'s'</span>, <span class="string">'c'</span>&#125;;</span><br><span class="line">        String[] strs = &#123;<span class="string">"a"</span>,<span class="string">"aa"</span>,<span class="string">"cat"</span>,<span class="string">"cats"</span>,<span class="string">"aaa"</span>,<span class="string">"cc"</span>&#125;;</span><br><span class="line">        ArrayList&lt;String&gt; result = findCombination(array, strs);</span><br><span class="line">        <span class="keyword">for</span> (String str : result) &#123;</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">findCombination</span><span class="params">(<span class="keyword">char</span>[] array, String[] strs)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (array == <span class="keyword">null</span> || strs == <span class="keyword">null</span> || array.length == <span class="number">0</span> || strs.length == <span class="number">0</span>) <span class="keyword">return</span> result;</span><br><span class="line">        TrieNode root = buildTrieTree(strs);</span><br><span class="line">        HashMap&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> ch : array) &#123;</span><br><span class="line">            map.put(ch, map.getOrDefault(ch, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(result, <span class="string">""</span>, root, map);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> val;</span><br><span class="line">        <span class="keyword">boolean</span> isWord;</span><br><span class="line">        HashMap&lt;Character, TrieNode&gt; children;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TrieNode</span><span class="params">(<span class="keyword">char</span> val)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">            <span class="keyword">this</span>.isWord = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">this</span>.children = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> TrieNode <span class="title">buildTrieTree</span><span class="params">(String[] strs)</span> </span>&#123;</span><br><span class="line">        TrieNode root = <span class="keyword">new</span> TrieNode(<span class="string">' '</span>);</span><br><span class="line">        <span class="keyword">for</span> (String str : strs) &#123;</span><br><span class="line">            insertString(root, str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">insertString</span><span class="params">(TrieNode root, String str)</span> </span>&#123;</span><br><span class="line">        TrieNode tmpNode = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> nodeValue : str.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (! tmpNode.children.containsKey(nodeValue)) &#123;</span><br><span class="line">                tmpNode.children.put(nodeValue, <span class="keyword">new</span> TrieNode(nodeValue));</span><br><span class="line">            &#125;</span><br><span class="line">            tmpNode = tmpNode.children.get(nodeValue);</span><br><span class="line">        &#125;</span><br><span class="line">        tmpNode.isWord = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(ArrayList&lt;String&gt; result, String tmpPath, TrieNode root, HashMap&lt;Character, Integer&gt; map)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root.isWord) &#123;</span><br><span class="line">            result.add(tmpPath);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> child : root.children.keySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (! map.containsKey(child)) <span class="keyword">continue</span>;</span><br><span class="line">            map.put(child, map.get(child) - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (map.get(child) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                dfs(result, tmpPath + child, root.children.get(child), map);</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(child, map.get(child) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">```    </span><br><span class="line">这里同时也给出一个对给定的<span class="keyword">char</span>数组可以组成的String集合做Trie tree的处理的实现方法。</span><br><span class="line">这里有两点需要注意：</span><br><span class="line"><span class="number">1</span>. 在Trie Tree中搜索String时临界点的处理；</span><br><span class="line"><span class="number">2</span>. 建Trie Tree时可以优化。</span><br><span class="line">注意：该方法不适合这道题目，只是作为参考。</span><br><span class="line"></span><br><span class="line">```Java</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">findCombination</span><span class="params">(<span class="keyword">char</span>[] array, String[] strs)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        TrieNode root = buildTrie(array);</span><br><span class="line">        <span class="keyword">for</span> (String str : strs) &#123;</span><br><span class="line">            <span class="keyword">if</span> (searchString(root, str)) result.add(str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">searchString</span><span class="params">(TrieNode root, String str)</span> </span>&#123;</span><br><span class="line">        TrieNode tmpNode = root;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (tmpNode != <span class="keyword">null</span> &amp;&amp; index &lt; str.length()) &#123;</span><br><span class="line">            <span class="keyword">char</span> curChar = str.charAt(index ++);</span><br><span class="line">            tmpNode = tmpNode.children.get(curChar);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index == str.length() &amp;&amp; tmpNode != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> val;</span><br><span class="line">        HashMap&lt;Character, TrieNode&gt; children;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TrieNode</span><span class="params">(<span class="keyword">char</span> val)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">            children = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> TrieNode <span class="title">buildTrie</span><span class="params">(<span class="keyword">char</span>[] array)</span> </span>&#123;</span><br><span class="line">        TrieNode root = <span class="keyword">new</span> TrieNode(<span class="string">' '</span>);</span><br><span class="line">        <span class="keyword">if</span> (array == <span class="keyword">null</span> || array.length == <span class="number">0</span>) <span class="keyword">return</span> root;</span><br><span class="line">        Arrays.sort(array);</span><br><span class="line">        dfs(array, <span class="keyword">new</span> <span class="keyword">boolean</span>[array.length], root);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">char</span>[] array, <span class="keyword">boolean</span>[] visited, TrieNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visited[i] == <span class="keyword">false</span>) &#123;</span><br><span class="line">                visited[i] = <span class="keyword">true</span>;</span><br><span class="line">                TrieNode child = <span class="keyword">new</span> TrieNode(array[i]);</span><br><span class="line">                root.children.put(array[i], child);</span><br><span class="line">                dfs(array, visited, child);</span><br><span class="line">                visited[i] = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (i + <span class="number">1</span> &lt; array.length &amp;&amp; array[i] == array[i + <span class="number">1</span>] &amp;&amp; visited[i] == <span class="keyword">false</span>) i ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="15-Detect-deadlock-in-log-file"><a href="#15-Detect-deadlock-in-log-file" class="headerlink" title="15. Detect deadlock in log file"></a>15. Detect deadlock in log file</h2><p>下面解法中的detect cycle不正确，应该是有两个set来做，参见11题。</p>
<p>Code<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> program_id;</span><br><span class="line">       Set&lt;Node&gt; children;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.program_id = id;</span><br><span class="line">           <span class="keyword">this</span>.children = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">LogEntry</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> logId;</span><br><span class="line">       <span class="keyword">int</span> mutexId;</span><br><span class="line">       <span class="keyword">boolean</span> act;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">LogEntry</span><span class="params">(<span class="keyword">int</span> logId, <span class="keyword">int</span> mutexId, <span class="keyword">boolean</span> act)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.logId = logId;</span><br><span class="line">           <span class="keyword">this</span>.mutexId = mutexId;</span><br><span class="line">           <span class="keyword">this</span>.act = act;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       List&lt;LogEntry&gt; logs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">2</span>,<span class="number">2</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">3</span>,<span class="number">1</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">2</span>,<span class="number">1</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">1</span>,<span class="number">2</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">false</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">3</span>,<span class="number">2</span>,<span class="keyword">true</span>));</span><br><span class="line">       <span class="keyword">int</span> res = detectDeadLock(logs);</span><br><span class="line">       System.out.print(res);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">detectDeadLock</span><span class="params">(List&lt;LogEntry&gt; logs)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (logs == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">       HashMap&lt;Integer, Node&gt; graph = <span class="keyword">new</span> HashMap&lt;Integer, Node&gt;();</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; logs.size(); i ++) &#123;</span><br><span class="line">           LogEntry log = logs.get(i);</span><br><span class="line">           Node parent = graph.containsKey(log.logId) ? graph.get(log.logId) : <span class="keyword">new</span> Node(log.logId);</span><br><span class="line">           graph.put(log.logId, parent);</span><br><span class="line">           <span class="keyword">if</span> (log.logId == log.mutexId) <span class="keyword">continue</span>;</span><br><span class="line">           Node child = graph.containsKey(log.mutexId) ? graph.get(log.mutexId) : <span class="keyword">new</span> Node(log.mutexId);</span><br><span class="line">           graph.put(log.mutexId, child);</span><br><span class="line">           <span class="keyword">if</span> (log.act == <span class="keyword">false</span>) &#123;</span><br><span class="line">               deleteEdge(parent, child);</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               addEdge(parent, child);</span><br><span class="line">               <span class="keyword">if</span> (containsCycle(parent, <span class="keyword">new</span> HashSet&lt;&gt;())) <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteEdge</span><span class="params">(Node parent, Node child)</span> </span>&#123;</span><br><span class="line">       parent.children.remove(child);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(Node parent, Node child)</span> </span>&#123;</span><br><span class="line">       parent.children.add(child);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">containsCycle</span><span class="params">(Node node, HashSet&lt;Node&gt; visited)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (!visited.add(node)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       <span class="keyword">for</span> (Node child : node.children) &#123;</span><br><span class="line">           <span class="keyword">if</span> (containsCycle(child, visited)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="16-Big-Int"><a href="#16-Big-Int" class="headerlink" title="16. Big Int"></a>16. Big Int</h2><p>Update<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">BigInt</span> </span>&#123;</span><br><span class="line">        String val;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">BigInt</span><span class="params">(String v)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.val = v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> BigInt <span class="title">add</span><span class="params">(BigInt other)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> aLen = <span class="keyword">this</span>.val.length();</span><br><span class="line">            <span class="keyword">int</span> bLen = other.val.length();</span><br><span class="line">            <span class="keyword">int</span> aIndex = <span class="keyword">this</span>.val.length() - <span class="number">1</span>, bIndex = other.val.length() - <span class="number">1</span>, carry = <span class="number">0</span>;</span><br><span class="line">            String result = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">while</span> (aIndex &gt;= <span class="number">0</span> || bIndex &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> tmpValue = carry;</span><br><span class="line">                <span class="keyword">if</span> (aIndex &gt;= <span class="number">0</span>) tmpValue += <span class="keyword">this</span>.val.charAt(aIndex) - <span class="string">'0'</span>;</span><br><span class="line">                <span class="keyword">if</span> (bIndex &gt;= <span class="number">0</span>) tmpValue += other.val.charAt(bIndex) - <span class="string">'0'</span>;</span><br><span class="line">                result = (tmpValue % <span class="number">10</span>) + result;</span><br><span class="line">                carry = tmpValue / <span class="number">10</span>;</span><br><span class="line">                aIndex--; bIndex --;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (carry != <span class="number">0</span>) result = carry + result;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> BigInt(result);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> BigInt <span class="title">multiply</span><span class="params">(BigInt other)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> aLen = <span class="keyword">this</span>.val.length(), bLen = other.val.length();</span><br><span class="line">            <span class="comment">// 999 * 99 = 98901</span></span><br><span class="line">            <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[aLen + bLen];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> aIndex = aLen - <span class="number">1</span>; aIndex &gt;= <span class="number">0</span>; aIndex --) &#123;</span><br><span class="line">                <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">int</span> aValue = <span class="keyword">this</span>.val.charAt(aIndex) - <span class="string">'0'</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> bIndex = bLen - <span class="number">1</span>; bIndex &gt;= <span class="number">0</span>; bIndex --) &#123;</span><br><span class="line">                    <span class="keyword">int</span> tmp = result[aIndex + bIndex + <span class="number">1</span>] + carry + aValue * (other.val.charAt(bIndex) - <span class="string">'0'</span>);</span><br><span class="line">                    result[aIndex + bIndex + <span class="number">1</span>] = tmp % <span class="number">10</span>;</span><br><span class="line">                    carry = tmp / <span class="number">10</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">int</span> shift = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (carry != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">int</span> tmp = result[aIndex - shift] + carry;</span><br><span class="line">                    result[aIndex - shift]  = tmp % <span class="number">10</span>;</span><br><span class="line">                    carry = tmp / <span class="number">10</span>;</span><br><span class="line">                    shift ++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            String resultStr = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> num : result) resultStr = resultStr + num;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> BigInt(resultStr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BigInt one = <span class="keyword">new</span> BigInt(<span class="string">"99"</span>);</span><br><span class="line">        BigInt two = <span class="keyword">new</span> BigInt(<span class="string">"9999"</span>);</span><br><span class="line">        BigInt three = one.multiply(two);</span><br><span class="line">        System.out.println(three.val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       String[][] testCase = &#123;&#123;<span class="string">"0"</span>, <span class="string">"123"</span>&#125;, &#123;<span class="string">"987"</span>, <span class="string">"989"</span>&#125;, &#123;<span class="string">"9999"</span>, <span class="string">"1"</span>&#125;&#125;;</span><br><span class="line">       <span class="keyword">for</span> (String[] numbers : testCase) &#123;</span><br><span class="line">           String res = add(numbers[<span class="number">0</span>], numbers[<span class="number">1</span>]);</span><br><span class="line">           System.out.println(res);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> String <span class="title">add</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (A == <span class="keyword">null</span>) <span class="keyword">return</span> B;</span><br><span class="line">       <span class="keyword">if</span> (B == <span class="keyword">null</span>) <span class="keyword">return</span> A;</span><br><span class="line">       <span class="keyword">if</span> (A.length() &lt; B.length()) &#123;</span><br><span class="line">           String tmpStr = A;</span><br><span class="line">           A = B;</span><br><span class="line">           B = tmpStr;</span><br><span class="line">       &#125;</span><br><span class="line">       StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">       <span class="keyword">int</span> carry = <span class="number">0</span>, pointA = A.length() - <span class="number">1</span>, pointB = B.length() - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">while</span> (pointA &gt;= <span class="number">0</span> || pointB &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">if</span> (pointB &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">               <span class="keyword">int</span> value = A.charAt(pointA) - <span class="string">'0'</span> + B.charAt(pointB) - <span class="string">'0'</span> + carry;</span><br><span class="line">               result.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">               carry = value / <span class="number">10</span>;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">int</span> value = A.charAt(pointA) - <span class="string">'0'</span> + carry;</span><br><span class="line">               result.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">               carry = value / <span class="number">10</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           pointA --; pointB --;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> (carry != <span class="number">0</span>) result.insert(<span class="number">0</span>, carry);</span><br><span class="line">       <span class="keyword">return</span> result.toString();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> String <span class="title">minus</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (A == <span class="keyword">null</span> || B == <span class="keyword">null</span> || A.length() == <span class="number">0</span> || B.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">int</span> compareTag = compareTwoNumbers(A, B);</span><br><span class="line">       <span class="keyword">if</span> (compareTag == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"0"</span>;</span><br><span class="line">       <span class="keyword">if</span> (compareTag == -<span class="number">1</span>) &#123;</span><br><span class="line">           String tmp = A;</span><br><span class="line">           A = B;</span><br><span class="line">           B = tmp;</span><br><span class="line">       &#125;</span><br><span class="line">       StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">       <span class="keyword">int</span> indexA = A.length() - <span class="number">1</span>, indexB = B.length() - <span class="number">1</span>, carry = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span> (indexA &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">int</span> value = carry;</span><br><span class="line">           <span class="keyword">if</span> (indexB &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">               value += A.charAt(indexA) - <span class="string">'0'</span> - (B.charAt(indexB) - <span class="string">'0'</span>);</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               value += A.charAt(indexA) - <span class="string">'0'</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (value &lt; <span class="number">0</span>) &#123;</span><br><span class="line">               value += <span class="number">10</span>;</span><br><span class="line">               carry = -<span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           result.insert(<span class="number">0</span>, value);</span><br><span class="line">           indexA --; indexB --;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">int</span> zeroIndex = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span> (zeroIndex &lt; result.length() - <span class="number">1</span> &amp;&amp; result.charAt(zeroIndex) == <span class="string">'0'</span>) zeroIndex ++;</span><br><span class="line">       <span class="keyword">return</span> (compareTag == -<span class="number">1</span> ? <span class="string">"-"</span> : <span class="string">""</span>) + result.toString().substring(zeroIndex);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> String <span class="title">multiply</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (A == <span class="keyword">null</span> || B == <span class="keyword">null</span> || A.length() == <span class="number">0</span> || B.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">int</span> lastIndexA = A.length() - <span class="number">1</span>, lastIndexB = B.length() - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">int</span> totalLen = lastIndexA + lastIndexB + <span class="number">2</span>;</span><br><span class="line">       <span class="keyword">int</span>[] resultInt = <span class="keyword">new</span> <span class="keyword">int</span>[totalLen];</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> indexA = lastIndexA; indexA &gt;= <span class="number">0</span>; indexA --) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> indexB = lastIndexB; indexB &gt;= <span class="number">0</span>; indexB --) &#123;</span><br><span class="line">               <span class="keyword">int</span> curPosition = indexA + indexB + <span class="number">1</span>;</span><br><span class="line">               resultInt[curPosition] += (A.charAt(indexA) - <span class="string">'0'</span>) * (B.charAt(indexB) - <span class="string">'0'</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       StringBuilder resultStr = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">       <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> tmpIndex = resultInt.length - <span class="number">1</span>; tmpIndex &gt;= <span class="number">0</span>; tmpIndex --) &#123;</span><br><span class="line">           <span class="keyword">int</span> value = resultInt[tmpIndex] + carry;</span><br><span class="line">           resultStr.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">           carry = value / <span class="number">10</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">int</span> lastZeroIndex = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span> (lastZeroIndex &lt; resultStr.length() - <span class="number">1</span> &amp;&amp; resultStr.charAt(lastZeroIndex) == <span class="string">'0'</span>) lastZeroIndex ++;</span><br><span class="line">       <span class="keyword">return</span> resultStr.toString().substring(lastZeroIndex);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Follow-Up-with-negative-number"><a href="#Follow-Up-with-negative-number" class="headerlink" title="Follow Up: with negative number"></a>Follow Up: with negative number</h3><p>进行一系列的逻辑处理，比如<code>Add</code>中出现1个负数，就变换成<code>Minus</code>；如果出现两个负数，就变换成正数相加再在结果前加负号。</p>
<h3 id="Follow-Up-Big-Double"><a href="#Follow-Up-Big-Double" class="headerlink" title="Follow Up: Big Double"></a>Follow Up: Big Double</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">bigDoubleAdd</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">        doubleAddCarry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> dotIndexA = A.indexOf(<span class="string">"."</span>);</span><br><span class="line">        <span class="keyword">int</span> dotIndexB = B.indexOf(<span class="string">"."</span>);</span><br><span class="line">        String intA = dotIndexA == -<span class="number">1</span> ? A : A.substring(<span class="number">0</span>, dotIndexA);</span><br><span class="line">        String intB = dotIndexB == -<span class="number">1</span> ? B : B.substring(<span class="number">0</span>, dotIndexB);</span><br><span class="line">        String decimalA = dotIndexA == -<span class="number">1</span> ? <span class="string">""</span> : A.substring(dotIndexA + <span class="number">1</span>);</span><br><span class="line">        String decimalB = dotIndexB == -<span class="number">1</span> ? <span class="string">""</span> : B.substring(dotIndexB + <span class="number">1</span>);</span><br><span class="line">        String decimalSum = decimalAdd(decimalA, decimalB);</span><br><span class="line">        String intSum = intAdd(intA, intB);</span><br><span class="line">        <span class="keyword">return</span> intSum + (decimalSum == <span class="string">""</span> ? <span class="string">""</span> : (<span class="string">"."</span> + decimalSum));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> doubleAddCarry;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">decimalAdd</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (A.length() == <span class="number">0</span>) <span class="keyword">return</span> B;</span><br><span class="line">        <span class="keyword">if</span> (B.length() == <span class="number">0</span>) <span class="keyword">return</span> A;</span><br><span class="line">        <span class="keyword">if</span> (A.length() &lt; B.length()) &#123;</span><br><span class="line">            String tmp = A;</span><br><span class="line">            A = B;</span><br><span class="line">            B = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> lenA = A.length() - <span class="number">1</span>, lenB = B.length() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> indexA = lenA, indexB = lenB;</span><br><span class="line">        <span class="keyword">while</span> (indexA &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> value = A.charAt(indexA) - <span class="string">'0'</span> + doubleAddCarry;</span><br><span class="line">            <span class="keyword">if</span> (indexA &lt;= lenB) &#123;</span><br><span class="line">                value += B.charAt(indexB) - <span class="string">'0'</span>;</span><br><span class="line">                indexB --;</span><br><span class="line">            &#125;</span><br><span class="line">            result.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">            doubleAddCarry = value / <span class="number">10</span>;</span><br><span class="line">            indexA --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">intAdd</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (A.length() == <span class="number">0</span>) <span class="keyword">return</span> B;</span><br><span class="line">        <span class="keyword">if</span> (B.length() == <span class="number">0</span>) <span class="keyword">return</span> A;</span><br><span class="line">        <span class="keyword">if</span> (A.length() &lt; B.length()) &#123;</span><br><span class="line">            String tmp = A;</span><br><span class="line">            A = B;</span><br><span class="line">            B = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> lenA = A.length(), lenB = B.length() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> indexA = lenA - <span class="number">1</span>, indexB = lenB;</span><br><span class="line">        <span class="keyword">while</span> (indexA &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> value = A.charAt(indexA) - <span class="string">'0'</span> + doubleAddCarry;</span><br><span class="line">            <span class="keyword">if</span> (indexB &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                value += B.charAt(indexB) - <span class="string">'0'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            result.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">            doubleAddCarry = value / <span class="number">10</span>;</span><br><span class="line">            indexA --; indexB --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (doubleAddCarry != <span class="number">0</span>) result.insert(<span class="number">0</span>, doubleAddCarry);</span><br><span class="line">        <span class="keyword">return</span> result.toString();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="17-SecretSanta"><a href="#17-SecretSanta" class="headerlink" title="17. SecretSanta"></a>17. SecretSanta</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String[][] testcases = &#123;&#123;<span class="string">"mary"</span>, <span class="string">"alice"</span>, <span class="string">"mike"</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (String[] friends : testcases) &#123;</span><br><span class="line">            ArrayList&lt;ArrayList&lt;String&gt;&gt; result = giftExchange(friends);</span><br><span class="line">            System.out.println(<span class="string">"result is: "</span>);</span><br><span class="line">            <span class="keyword">for</span> (ArrayList&lt;String&gt; oneSolution : result) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; oneSolution.size(); index ++) &#123;</span><br><span class="line">                    System.out.print(friends[index] + <span class="string">" -&gt; "</span> + oneSolution.get(index) + <span class="string">"   "</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;ArrayList&lt;String&gt;&gt; giftExchange(String[] friends) &#123;</span><br><span class="line">        ArrayList&lt;ArrayList&lt;String&gt;&gt; result = <span class="keyword">new</span> ArrayList&lt;ArrayList&lt;String&gt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (friends == <span class="keyword">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">        backtracking(result, <span class="keyword">new</span> ArrayList&lt;String&gt;(), friends, <span class="keyword">new</span> <span class="keyword">boolean</span>[friends.length]);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">backtracking</span><span class="params">(ArrayList&lt;ArrayList&lt;String&gt;&gt; result, ArrayList&lt;String&gt; tmpResult, String[] friends, <span class="keyword">boolean</span>[] visited)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tmpResult.size() == friends.length) &#123;</span><br><span class="line">            result.add(<span class="keyword">new</span> ArrayList&lt;&gt;(tmpResult));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; friends.length; i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (! visited[i] &amp;&amp; tmpResult.size() != i) &#123;</span><br><span class="line">                tmpResult.add(friends[i]);</span><br><span class="line">                visited[i] = <span class="keyword">true</span>;</span><br><span class="line">                backtracking(result, tmpResult, friends, visited);</span><br><span class="line">                tmpResult.remove(tmpResult.size() - <span class="number">1</span>);</span><br><span class="line">                visited[i] = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="18-Permutation"><a href="#18-Permutation" class="headerlink" title="18. Permutation"></a>18. Permutation</h2><p>leetcode 46: <a href="https://leetcode.com/problems/permutations/" target="_blank" rel="noopener">https://leetcode.com/problems/permutations/</a><br>leetcode 46: comtains duplicate<br>以下是包含duplicate的解法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">private List&lt;List&lt;Integer&gt;&gt; permute(int[] nums) &#123;</span><br><span class="line">       List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;List&lt;Integer&gt;&gt;();</span><br><span class="line">       Arrays.sort(nums);</span><br><span class="line">       backtracking(result, new ArrayList&lt;&gt;(), nums, new boolean[nums.length]);</span><br><span class="line">       return result;</span><br><span class="line">   &#125;</span><br><span class="line">   private void backtracking(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; tmpResult, int[] nums, boolean[] visited) &#123;</span><br><span class="line">       if (tmpResult.size() == nums.length) &#123;</span><br><span class="line">           result.add(new ArrayList&lt;&gt;(tmpResult));</span><br><span class="line">           return;</span><br><span class="line">       &#125;</span><br><span class="line">       for (int i = 0; i &lt; nums.length; i ++) &#123;</span><br><span class="line">           if (! visited[i]) &#123;</span><br><span class="line">               visited[i] = true;</span><br><span class="line">               tmpResult.add(nums[i]);</span><br><span class="line">               backtracking(result, tmpResult, nums, visited);</span><br><span class="line">               visited[i] = false;</span><br><span class="line">               tmpResult.remove(tmpResult.size() - 1);</span><br><span class="line">               while (i + 1 &lt; nums.length &amp;&amp; nums[i] == nums[i + 1]) i ++;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Follow-up-Next-Permutation"><a href="#Follow-up-Next-Permutation" class="headerlink" title="Follow up: Next Permutation"></a>Follow up: Next Permutation</h3><p>需要注意的是在两个<code>while</code>循环中临界值等于号的处理。相关的test case有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1,5,1], [5,1,1]</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">nextPermutation</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length &lt; <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">       <span class="keyword">int</span> index = nums.length - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">while</span> (index &gt; <span class="number">0</span> &amp;&amp; nums[index] &lt;= nums[index - <span class="number">1</span>]) index --;</span><br><span class="line">       <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">           Arrays.sort(nums);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">int</span> exchangeIndex = nums.length - <span class="number">1</span>;</span><br><span class="line">           <span class="keyword">while</span> (exchangeIndex &gt; index &amp;&amp; nums[exchangeIndex] &lt;= nums[index - <span class="number">1</span>]) exchangeIndex --;</span><br><span class="line">           <span class="keyword">int</span> tmp = nums[exchangeIndex];</span><br><span class="line">           nums[exchangeIndex] = nums[index - <span class="number">1</span>];</span><br><span class="line">           nums[index - <span class="number">1</span>] = tmp;</span><br><span class="line">           Arrays.sort(nums, index, nums.length);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="19-Game-of-Life"><a href="#19-Game-of-Life" class="headerlink" title="19. Game of Life"></a>19. Game of Life</h2><p>需要注意的是在判断邻居节点live的个数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span>[][] board = &#123;&#123;<span class="number">1</span>,<span class="number">1</span>&#125;, &#123;<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line">       gameOfLife(board);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">gameOfLife</span><span class="params">(<span class="keyword">int</span>[][] board)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (board == <span class="keyword">null</span> || board.length == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">       <span class="keyword">int</span> row = board.length, col = board[<span class="number">0</span>].length;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> rowIndex = <span class="number">0</span>; rowIndex &lt; row; rowIndex ++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> colIndex = <span class="number">0</span>; colIndex &lt; col; colIndex ++) &#123;</span><br><span class="line">               <span class="keyword">int</span> liveCount = <span class="number">0</span>;</span><br><span class="line">               <span class="keyword">for</span> (<span class="keyword">int</span> neighbourRowIndex = Math.max(<span class="number">0</span>, rowIndex - <span class="number">1</span>); neighbourRowIndex &lt;= Math.min(row - <span class="number">1</span>, rowIndex + <span class="number">1</span>); neighbourRowIndex ++) &#123;</span><br><span class="line">                   <span class="keyword">for</span> (<span class="keyword">int</span> neighbourColIndex = Math.max(<span class="number">0</span>, colIndex - <span class="number">1</span>); neighbourColIndex &lt;= Math.min(col - <span class="number">1</span>, colIndex + <span class="number">1</span>); neighbourColIndex ++) &#123;</span><br><span class="line">                       <span class="keyword">if</span> (neighbourRowIndex == rowIndex &amp;&amp; neighbourColIndex == colIndex) <span class="keyword">continue</span>;</span><br><span class="line">                       <span class="keyword">if</span> (board[neighbourRowIndex][neighbourColIndex] == <span class="number">1</span> || board[neighbourRowIndex][neighbourColIndex] == <span class="number">2</span>) liveCount ++;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">if</span> (board[rowIndex][colIndex] == <span class="number">1</span> &amp;&amp; (liveCount &lt; <span class="number">2</span> || liveCount &gt; <span class="number">3</span>)) board[rowIndex][colIndex] = <span class="number">2</span>;</span><br><span class="line">               <span class="keyword">else</span> <span class="keyword">if</span> (board[rowIndex][colIndex] == <span class="number">0</span> &amp;&amp; liveCount == <span class="number">3</span>) board[rowIndex][colIndex] = <span class="number">3</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> rowIndex = <span class="number">0</span>; rowIndex &lt; row; rowIndex ++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> colIndex = <span class="number">0</span>; colIndex &lt; col; colIndex ++) &#123;</span><br><span class="line">               board[rowIndex][colIndex] &amp;= <span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Follow-Up-infinite-board"><a href="#Follow-Up-infinite-board" class="headerlink" title="Follow Up: infinite board"></a>Follow Up: infinite board</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gameOfLifeInfinite</span><span class="params">(<span class="keyword">int</span>[][] board)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (board == <span class="keyword">null</span> || board.length == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">       HashSet&lt;Cell&gt; live = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       <span class="keyword">int</span> row = board.length, col = board[<span class="number">0</span>].length;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i ++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j ++) &#123;</span><br><span class="line">               <span class="keyword">if</span> (board[i][j] == <span class="number">1</span>) live.add(<span class="keyword">new</span> Cell(i, j));</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       live = gameOfLife(live);</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i ++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j ++) &#123;</span><br><span class="line">               <span class="keyword">if</span> (live.contains(<span class="keyword">new</span> Cell(i, j))) board[i][j] = <span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Cell</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> x, y;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Cell</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.x = x;</span><br><span class="line">           <span class="keyword">this</span>.y = y;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> o <span class="keyword">instanceof</span> Cell &amp;&amp; ((Cell)o).x == <span class="keyword">this</span>.x &amp;&amp; ((Cell)o).y == <span class="keyword">this</span>.y;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           <span class="keyword">int</span> hashCode = <span class="number">1</span>;</span><br><span class="line">           hashCode = hashCode * <span class="number">31</span> + <span class="keyword">this</span>.x;</span><br><span class="line">           hashCode = hashCode * <span class="number">31</span> + <span class="keyword">this</span>.y;</span><br><span class="line">           <span class="keyword">return</span> hashCode;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> HashSet&lt;Cell&gt; <span class="title">gameOfLife</span><span class="params">(HashSet&lt;Cell&gt; live)</span> </span>&#123;</span><br><span class="line">       HashMap&lt;Cell, Integer&gt; neighbours = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (Cell cell : live) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> x = cell.x - <span class="number">1</span>; x &lt;= cell.x + <span class="number">1</span>; x ++) &#123;</span><br><span class="line">               <span class="keyword">for</span> (<span class="keyword">int</span> y = cell.y - <span class="number">1</span>; y &lt;= cell.y + <span class="number">1</span>; y ++) &#123;</span><br><span class="line">                   <span class="keyword">if</span> (x == cell.x &amp;&amp; y == cell.y) <span class="keyword">continue</span>;</span><br><span class="line">                   Cell neighbour = <span class="keyword">new</span> Cell(x, y);</span><br><span class="line">                   neighbours.put(neighbour, neighbours.getOrDefault(neighbour, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       HashSet&lt;Cell&gt; nextStates = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (Cell cell : neighbours.keySet()) &#123;</span><br><span class="line">           <span class="keyword">if</span> (neighbours.get(cell) == <span class="number">3</span> || (live.contains(cell) &amp;&amp; neighbours.get(cell) == <span class="number">2</span>)) nextStates.add(cell);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> nextStates;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="20-Trapping-Water-Problem"><a href="#20-Trapping-Water-Problem" class="headerlink" title="20. Trapping Water Problem"></a>20. Trapping Water Problem</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">trappingRainWater</span><span class="params">(<span class="keyword">int</span>[] heights)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (heights == <span class="keyword">null</span> || heights.length &lt; <span class="number">3</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> leftIndex=<span class="number">0</span>, rightIndex=heights.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> leftBounds = <span class="number">0</span>, rightBounds = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(leftIndex &lt;= rightIndex)&#123;</span><br><span class="line">            leftBounds = Math.max(leftBounds, heights[leftIndex]);</span><br><span class="line">            rightBounds = Math.max(rightBounds, heights[rightIndex]);</span><br><span class="line">            <span class="keyword">if</span>(leftBounds &lt; rightBounds)&#123;</span><br><span class="line">                result += leftBounds - heights[leftIndex];</span><br><span class="line">                leftIndex ++;</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                result += rightBounds - heights[rightIndex];</span><br><span class="line">                rightIndex --;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><div class="tags"><a href="/tags/Algorithm/">Algorithm</a></div><div class="post-nav"><a class="pre" href="/2016/10/29/Algorithm-Exercise-3/">Algorithm Exercise 3</a><a class="next" href="/2016/10/27/Algorithm-exercise-1/">Algorithm exercise 1</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/SpriteKit/" style="font-size: 15px;">SpriteKit</a> <a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/FullStack/" style="font-size: 15px;">FullStack</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/IOS/" style="font-size: 15px;">IOS</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Scrappy/" style="font-size: 15px;">Scrappy</a> <a href="/tags/Backend/" style="font-size: 15px;">Backend</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a> <a href="/tags/Mobile/" style="font-size: 15px;">Mobile</a> <a href="/tags/Cheet-Sheet/" style="font-size: 15px;">Cheet Sheet</a> <a href="/tags/WatchOS/" style="font-size: 15px;">WatchOS</a> <a href="/tags/Unity/" style="font-size: 15px;">Unity</a> <a href="/tags/Game/" style="font-size: 15px;">Game</a> <a href="/tags/Diary/" style="font-size: 15px;">Diary</a> <a href="/tags/系统/" style="font-size: 15px;">系统</a> <a href="/tags/System/" style="font-size: 15px;">System</a> <a href="/tags/OOD/" style="font-size: 15px;">OOD</a> <a href="/tags/RESTful/" style="font-size: 15px;">RESTful</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/01/01/写在岁末年初（2016）/">写在岁末年初（2016）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/18/Algorithm-Exercise-7/">Algorithm Exercise 7(Lyft)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/15/hash相关/">hash相关</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/14/Java死锁例子/">Java死锁例子</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/14/Java中abstract和interface区别/">Java中abstract和interface区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/11/Algorithm-Exercise-6/">Algorithm Exercise 6</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/01/Algorithm-Exercise-5/">Algorithm Exercise 5</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/30/Algorithm-Exercise-4/">Algorithm Exercise 4</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/29/Algorithm-Exercise-3/">Algorithm Exercise 3</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/28/Algorithm-Exercise-2/">Algorithm Exercise 2</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">邢鹏飞的博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>