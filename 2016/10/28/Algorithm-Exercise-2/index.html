<!DOCTYPE html>
<html >
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Pengfei Xing" />



<meta name="description" content="11. Detect Cycle in GraphCode
需要注意的是需要两个set，一个用来保存全局访问节点，一个用来保存当前路径走过的节点，如果在走路径的时候发现了全局已经访问的节点，则推出此分支的搜索，如果碰到当前路径走过的节点，则证明图中有环。
注意在dfs中要从path visited中移除访问过的节点
12345678910111213141516171819202122232425">
<meta property="og:type" content="article">
<meta property="og:title" content="Algorithm Exercise 2">
<meta property="og:url" content="http://yoursite.com/2016/10/28/Algorithm-Exercise-2/index.html">
<meta property="og:site_name" content="邢鹏飞的博客">
<meta property="og:description" content="11. Detect Cycle in GraphCode
需要注意的是需要两个set，一个用来保存全局访问节点，一个用来保存当前路径走过的节点，如果在走路径的时候发现了全局已经访问的节点，则推出此分支的搜索，如果碰到当前路径走过的节点，则证明图中有环。
注意在dfs中要从path visited中移除访问过的节点
12345678910111213141516171819202122232425">
<meta property="og:updated_time" content="2017-05-02T06:56:44.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Algorithm Exercise 2">
<meta name="twitter:description" content="11. Detect Cycle in GraphCode
需要注意的是需要两个set，一个用来保存全局访问节点，一个用来保存当前路径走过的节点，如果在走路径的时候发现了全局已经访问的节点，则推出此分支的搜索，如果碰到当前路径走过的节点，则证明图中有环。
注意在dfs中要从path visited中移除访问过的节点
12345678910111213141516171819202122232425">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="邢鹏飞的博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Algorithm Exercise 2 | 邢鹏飞的博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Pengfei Xing</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Backend/">Backend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cheet-Sheet/">Cheet Sheet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Diary/">Diary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FullStack/">FullStack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Game/">Game</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IOS/">IOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mobile/">Mobile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/">MongoDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOD/">OOD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RESTful/">RESTful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrappy/">Scrappy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpriteKit/">SpriteKit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/System/">System</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity/">Unity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WatchOS/">WatchOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/系统/">系统</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Pengfei Xing</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Pengfei Xing</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-Algorithm-Exercise-2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/28/Algorithm-Exercise-2/" class="article-date">
      <time datetime="2016-10-28T20:56:44.000Z" itemprop="datePublished">2016-10-28</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Algorithm Exercise 2
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="11-Detect-Cycle-in-Graph"><a href="#11-Detect-Cycle-in-Graph" class="headerlink" title="11. Detect Cycle in Graph"></a>11. Detect Cycle in Graph</h2><p>Code</p>
<p>需要注意的是需要两个<code>set</code>，一个用来保存全局访问节点，一个用来保存当前路径走过的节点，如果在走路径的时候发现了全局已经访问的节点，则推出此分支的搜索，如果碰到当前路径走过的节点，则证明图中有环。</p>
<p>注意在dfs中要从path visited中移除访问过的节点</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> label;</span><br><span class="line">       HashSet&lt;Node&gt; neighbours;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> label)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.label = label;</span><br><span class="line">           <span class="keyword">this</span>.neighbours = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">detectedCycle</span><span class="params">(ArrayList&lt;Node&gt; graph)</span> </span>&#123;</span><br><span class="line">       HashSet&lt;Node&gt; visited = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (Node node : graph) &#123;</span><br><span class="line">           <span class="keyword">if</span> (visited.contains(node)) <span class="keyword">continue</span>;</span><br><span class="line">           visited.add(node);</span><br><span class="line">           <span class="keyword">if</span> (dfs(node, <span class="keyword">new</span> HashSet&lt;Node&gt;(), visited)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">dfs</span><span class="params">(Node node, HashSet&lt;Node&gt; pathVisited, HashSet&lt;Node&gt; globalVisited)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (pathVisited.contains(node)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       <span class="keyword">if</span> (globalVisited.contains(node)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       pathVisited.add(node);</span><br><span class="line">       globalVisited.add(node);</span><br><span class="line">       <span class="keyword">for</span> (Node neighbour : node.neighbours) &#123;</span><br><span class="line">           <span class="keyword">if</span>(dfs(neighbour, pathVisited, globalVisited)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       pathVisited.remove(node);</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="12-Bipart-Graph"><a href="#12-Bipart-Graph" class="headerlink" title="12. Bipart Graph"></a>12. Bipart Graph</h2><p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">bipartGraph</span><span class="params">(ArrayList&lt;Node&gt; graph)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (graph == <span class="keyword">null</span> || graph.size() &lt; <span class="number">3</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       HashSet&lt;Node&gt; color1 = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       HashSet&lt;Node&gt; color2 = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (Node node : graph) &#123;</span><br><span class="line">           <span class="keyword">if</span> (!color1.contains(node) &amp;&amp; !color2.contains(node)) &#123;</span><br><span class="line">               <span class="keyword">if</span> (paintColor(node, color1, color2) == <span class="keyword">false</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">paintColor</span><span class="params">(Node node, HashSet&lt;Node&gt; color1, HashSet&lt;Node&gt; color2)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (color2.contains(node)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       color1.add(node);</span><br><span class="line">       <span class="keyword">for</span> (Node neighbour : node.neighbours) &#123;</span><br><span class="line">           <span class="keyword">if</span> (color1.contains(neighbour)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">           <span class="keyword">if</span> (paintColor(neighbour, color2, color1) == <span class="keyword">false</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="13-Toggle"><a href="#13-Toggle" class="headerlink" title="13. Toggle"></a>13. Toggle</h2><p>在hashmap中insert和delete时，不要忘记跟新hashmap。</p>
<p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       Toggle toggleInstance = <span class="keyword">new</span> Toggle();</span><br><span class="line">       toggleInstance.toggle(<span class="string">"a"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"b"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"c"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"a"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"c"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"c"</span>);</span><br><span class="line">       toggleInstance.toggle(<span class="string">"a"</span>);</span><br><span class="line">       ArrayList&lt;String&gt; result = toggleInstance.getSelectedList();</span><br><span class="line">       <span class="keyword">for</span> (String s : result) &#123;</span><br><span class="line">           System.out.println(s);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">       Node pre, next;</span><br><span class="line">       String val;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Node</span> <span class="params">(String val)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.val = val;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   Node head, tail;</span><br><span class="line">   HashMap&lt;String, Node&gt; mp;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Toggle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       mp = <span class="keyword">new</span> HashMap&lt;String, Node&gt;();</span><br><span class="line">       head = <span class="keyword">new</span> Node(<span class="string">" "</span>);</span><br><span class="line">       tail = <span class="keyword">new</span> Node(<span class="string">" "</span>);</span><br><span class="line">       head.next = tail;</span><br><span class="line">       tail.pre = head;</span><br><span class="line">       head.pre = <span class="keyword">null</span>;</span><br><span class="line">       tail.next = <span class="keyword">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">toggle</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (mp.containsKey(username)) deleteNode(username);</span><br><span class="line">       <span class="keyword">else</span> insertNode(username);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> ArrayList&lt;String&gt; <span class="title">getSelectedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       Node tmp = head.next;</span><br><span class="line">       <span class="keyword">while</span> (tmp != tail) &#123;</span><br><span class="line">           result.add(tmp.val);</span><br><span class="line">           tmp = tmp.next;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteNode</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">       Node cur = mp.get(username);</span><br><span class="line">       cur.pre.next = cur.next;</span><br><span class="line">       cur.next.pre = cur.pre;</span><br><span class="line">       cur = <span class="keyword">null</span>;</span><br><span class="line">       mp.remove(username);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">insertNode</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">       Node insertedNode = <span class="keyword">new</span> Node(username);</span><br><span class="line">       insertedNode.pre = tail.pre;</span><br><span class="line">       insertedNode.next = tail;</span><br><span class="line">       tail.pre.next = insertedNode;</span><br><span class="line">       tail.pre = insertedNode;</span><br><span class="line">       mp.put(username, insertedNode);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="14-find-String-combined-by-given-char"><a href="#14-find-String-combined-by-given-char" class="headerlink" title="14. find String combined by given char"></a>14. find String combined by given char</h2><p>Link: <a href="http://www.1point3acres.com/bbs/thread-156347-1-1.html" target="_blank" rel="external">http://www.1point3acres.com/bbs/thread-156347-1-1.html</a><br>因为LZ说待查找的String是million级别的，所以还是需要对给定的String数组进行建Trie，因为考虑假如有1万个String是以10万个a开头的，那么在利用trie数据结构，我们只需要判断一次10万个a是否满足情况，而在没有trie的情况下，我们则需要对每个都需要判断。</p>
<p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] array = &#123;<span class="string">'a'</span>,<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'r'</span>,<span class="string">'t'</span>, <span class="string">'s'</span>, <span class="string">'c'</span>&#125;;</span><br><span class="line">        String[] strs = &#123;<span class="string">"a"</span>,<span class="string">"aa"</span>,<span class="string">"cat"</span>,<span class="string">"cats"</span>,<span class="string">"aaa"</span>,<span class="string">"cc"</span>&#125;;</span><br><span class="line">        ArrayList&lt;String&gt; result = findCombination(array, strs);</span><br><span class="line">        <span class="keyword">for</span> (String str : result) &#123;</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">findCombination</span><span class="params">(<span class="keyword">char</span>[] array, String[] strs)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (array == <span class="keyword">null</span> || strs == <span class="keyword">null</span> || array.length == <span class="number">0</span> || strs.length == <span class="number">0</span>) <span class="keyword">return</span> result;</span><br><span class="line">        TrieNode root = buildTrieTree(strs);</span><br><span class="line">        HashMap&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> ch : array) &#123;</span><br><span class="line">            map.put(ch, map.getOrDefault(ch, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(result, <span class="string">""</span>, root, map);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> val;</span><br><span class="line">        <span class="keyword">boolean</span> isWord;</span><br><span class="line">        HashMap&lt;Character, TrieNode&gt; children;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TrieNode</span><span class="params">(<span class="keyword">char</span> val)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">            <span class="keyword">this</span>.isWord = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">this</span>.children = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> TrieNode <span class="title">buildTrieTree</span><span class="params">(String[] strs)</span> </span>&#123;</span><br><span class="line">        TrieNode root = <span class="keyword">new</span> TrieNode(<span class="string">' '</span>);</span><br><span class="line">        <span class="keyword">for</span> (String str : strs) &#123;</span><br><span class="line">            insertString(root, str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">insertString</span><span class="params">(TrieNode root, String str)</span> </span>&#123;</span><br><span class="line">        TrieNode tmpNode = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> nodeValue : str.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (! tmpNode.children.containsKey(nodeValue)) &#123;</span><br><span class="line">                tmpNode.children.put(nodeValue, <span class="keyword">new</span> TrieNode(nodeValue));</span><br><span class="line">            &#125;</span><br><span class="line">            tmpNode = tmpNode.children.get(nodeValue);</span><br><span class="line">        &#125;</span><br><span class="line">        tmpNode.isWord = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(ArrayList&lt;String&gt; result, String tmpPath, TrieNode root, HashMap&lt;Character, Integer&gt; map)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root.isWord) &#123;</span><br><span class="line">            result.add(tmpPath);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> child : root.children.keySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (! map.containsKey(child)) <span class="keyword">continue</span>;</span><br><span class="line">            map.put(child, map.get(child) - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (map.get(child) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                dfs(result, tmpPath + child, root.children.get(child), map);</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(child, map.get(child) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">```    </span><br><span class="line">这里同时也给出一个对给定的<span class="keyword">char</span>数组可以组成的String集合做Trie tree的处理的实现方法。</span><br><span class="line">这里有两点需要注意：</span><br><span class="line"><span class="number">1</span>. 在Trie Tree中搜索String时临界点的处理；</span><br><span class="line"><span class="number">2</span>. 建Trie Tree时可以优化。</span><br><span class="line">注意：该方法不适合这道题目，只是作为参考。</span><br><span class="line"></span><br><span class="line">```<span class="function">Java</span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">findCombination</span><span class="params">(<span class="keyword">char</span>[] array, String[] strs)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        TrieNode root = buildTrie(array);</span><br><span class="line">        <span class="keyword">for</span> (String str : strs) &#123;</span><br><span class="line">            <span class="keyword">if</span> (searchString(root, str)) result.add(str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">searchString</span><span class="params">(TrieNode root, String str)</span> </span>&#123;</span><br><span class="line">        TrieNode tmpNode = root;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (tmpNode != <span class="keyword">null</span> &amp;&amp; index &lt; str.length()) &#123;</span><br><span class="line">            <span class="keyword">char</span> curChar = str.charAt(index ++);</span><br><span class="line">            tmpNode = tmpNode.children.get(curChar);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index == str.length() &amp;&amp; tmpNode != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> val;</span><br><span class="line">        HashMap&lt;Character, TrieNode&gt; children;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TrieNode</span><span class="params">(<span class="keyword">char</span> val)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">            children = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> TrieNode <span class="title">buildTrie</span><span class="params">(<span class="keyword">char</span>[] array)</span> </span>&#123;</span><br><span class="line">        TrieNode root = <span class="keyword">new</span> TrieNode(<span class="string">' '</span>);</span><br><span class="line">        <span class="keyword">if</span> (array == <span class="keyword">null</span> || array.length == <span class="number">0</span>) <span class="keyword">return</span> root;</span><br><span class="line">        Arrays.sort(array);</span><br><span class="line">        dfs(array, <span class="keyword">new</span> <span class="keyword">boolean</span>[array.length], root);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">char</span>[] array, <span class="keyword">boolean</span>[] visited, TrieNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visited[i] == <span class="keyword">false</span>) &#123;</span><br><span class="line">                visited[i] = <span class="keyword">true</span>;</span><br><span class="line">                TrieNode child = <span class="keyword">new</span> TrieNode(array[i]);</span><br><span class="line">                root.children.put(array[i], child);</span><br><span class="line">                dfs(array, visited, child);</span><br><span class="line">                visited[i] = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (i + <span class="number">1</span> &lt; array.length &amp;&amp; array[i] == array[i + <span class="number">1</span>] &amp;&amp; visited[i] == <span class="keyword">false</span>) i ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="15-Detect-deadlock-in-log-file"><a href="#15-Detect-deadlock-in-log-file" class="headerlink" title="15. Detect deadlock in log file"></a>15. Detect deadlock in log file</h2><p>下面解法中的detect cycle不正确，应该是有两个set来做，参见11题。</p>
<p>Code<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> program_id;</span><br><span class="line">       Set&lt;Node&gt; children;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.program_id = id;</span><br><span class="line">           <span class="keyword">this</span>.children = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">LogEntry</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> logId;</span><br><span class="line">       <span class="keyword">int</span> mutexId;</span><br><span class="line">       <span class="keyword">boolean</span> act;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">LogEntry</span><span class="params">(<span class="keyword">int</span> logId, <span class="keyword">int</span> mutexId, <span class="keyword">boolean</span> act)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.logId = logId;</span><br><span class="line">           <span class="keyword">this</span>.mutexId = mutexId;</span><br><span class="line">           <span class="keyword">this</span>.act = act;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       List&lt;LogEntry&gt; logs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">2</span>,<span class="number">2</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">3</span>,<span class="number">1</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">2</span>,<span class="number">1</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">1</span>,<span class="number">2</span>,<span class="keyword">true</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">false</span>));</span><br><span class="line">       logs.add(<span class="keyword">new</span> LogEntry(<span class="number">3</span>,<span class="number">2</span>,<span class="keyword">true</span>));</span><br><span class="line">       <span class="keyword">int</span> res = detectDeadLock(logs);</span><br><span class="line">       System.out.print(res);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">detectDeadLock</span><span class="params">(List&lt;LogEntry&gt; logs)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (logs == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">       HashMap&lt;Integer, Node&gt; graph = <span class="keyword">new</span> HashMap&lt;Integer, Node&gt;();</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; logs.size(); i ++) &#123;</span><br><span class="line">           LogEntry log = logs.get(i);</span><br><span class="line">           Node parent = graph.containsKey(log.logId) ? graph.get(log.logId) : <span class="keyword">new</span> Node(log.logId);</span><br><span class="line">           graph.put(log.logId, parent);</span><br><span class="line">           <span class="keyword">if</span> (log.logId == log.mutexId) <span class="keyword">continue</span>;</span><br><span class="line">           Node child = graph.containsKey(log.mutexId) ? graph.get(log.mutexId) : <span class="keyword">new</span> Node(log.mutexId);</span><br><span class="line">           graph.put(log.mutexId, child);</span><br><span class="line">           <span class="keyword">if</span> (log.act == <span class="keyword">false</span>) &#123;</span><br><span class="line">               deleteEdge(parent, child);</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               addEdge(parent, child);</span><br><span class="line">               <span class="keyword">if</span> (containsCycle(parent, <span class="keyword">new</span> HashSet&lt;&gt;())) <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteEdge</span><span class="params">(Node parent, Node child)</span> </span>&#123;</span><br><span class="line">       parent.children.remove(child);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(Node parent, Node child)</span> </span>&#123;</span><br><span class="line">       parent.children.add(child);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">containsCycle</span><span class="params">(Node node, HashSet&lt;Node&gt; visited)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (!visited.add(node)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       <span class="keyword">for</span> (Node child : node.children) &#123;</span><br><span class="line">           <span class="keyword">if</span> (containsCycle(child, visited)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="16-Big-Int"><a href="#16-Big-Int" class="headerlink" title="16. Big Int"></a>16. Big Int</h2><p>Update<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">BigInt</span> </span>&#123;</span><br><span class="line">        String val;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">BigInt</span><span class="params">(String v)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.val = v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> BigInt <span class="title">add</span><span class="params">(BigInt other)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> aLen = <span class="keyword">this</span>.val.length();</span><br><span class="line">            <span class="keyword">int</span> bLen = other.val.length();</span><br><span class="line">            <span class="keyword">int</span> aIndex = <span class="keyword">this</span>.val.length() - <span class="number">1</span>, bIndex = other.val.length() - <span class="number">1</span>, carry = <span class="number">0</span>;</span><br><span class="line">            String result = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">while</span> (aIndex &gt;= <span class="number">0</span> || bIndex &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> tmpValue = carry;</span><br><span class="line">                <span class="keyword">if</span> (aIndex &gt;= <span class="number">0</span>) tmpValue += <span class="keyword">this</span>.val.charAt(aIndex) - <span class="string">'0'</span>;</span><br><span class="line">                <span class="keyword">if</span> (bIndex &gt;= <span class="number">0</span>) tmpValue += other.val.charAt(bIndex) - <span class="string">'0'</span>;</span><br><span class="line">                result = (tmpValue % <span class="number">10</span>) + result;</span><br><span class="line">                carry = tmpValue / <span class="number">10</span>;</span><br><span class="line">                aIndex--; bIndex --;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (carry != <span class="number">0</span>) result = carry + result;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> BigInt(result);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> BigInt <span class="title">multiply</span><span class="params">(BigInt other)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> aLen = <span class="keyword">this</span>.val.length(), bLen = other.val.length();</span><br><span class="line">            <span class="comment">// 999 * 99 = 98901</span></span><br><span class="line">            <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[aLen + bLen];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> aIndex = aLen - <span class="number">1</span>; aIndex &gt;= <span class="number">0</span>; aIndex --) &#123;</span><br><span class="line">                <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">int</span> aValue = <span class="keyword">this</span>.val.charAt(aIndex) - <span class="string">'0'</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> bIndex = bLen - <span class="number">1</span>; bIndex &gt;= <span class="number">0</span>; bIndex --) &#123;</span><br><span class="line">                    <span class="keyword">int</span> tmp = result[aIndex + bIndex + <span class="number">1</span>] + carry + aValue * (other.val.charAt(bIndex) - <span class="string">'0'</span>);</span><br><span class="line">                    result[aIndex + bIndex + <span class="number">1</span>] = tmp % <span class="number">10</span>;</span><br><span class="line">                    carry = tmp / <span class="number">10</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">int</span> shift = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (carry != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">int</span> tmp = result[aIndex - shift] + carry;</span><br><span class="line">                    result[aIndex - shift]  = tmp % <span class="number">10</span>;</span><br><span class="line">                    carry = tmp / <span class="number">10</span>;</span><br><span class="line">                    shift ++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            String resultStr = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> num : result) resultStr = resultStr + num;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> BigInt(resultStr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BigInt one = <span class="keyword">new</span> BigInt(<span class="string">"99"</span>);</span><br><span class="line">        BigInt two = <span class="keyword">new</span> BigInt(<span class="string">"9999"</span>);</span><br><span class="line">        BigInt three = one.multiply(two);</span><br><span class="line">        System.out.println(three.val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       String[][] testCase = &#123;&#123;<span class="string">"0"</span>, <span class="string">"123"</span>&#125;, &#123;<span class="string">"987"</span>, <span class="string">"989"</span>&#125;, &#123;<span class="string">"9999"</span>, <span class="string">"1"</span>&#125;&#125;;</span><br><span class="line">       <span class="keyword">for</span> (String[] numbers : testCase) &#123;</span><br><span class="line">           String res = add(numbers[<span class="number">0</span>], numbers[<span class="number">1</span>]);</span><br><span class="line">           System.out.println(res);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> String <span class="title">add</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (A == <span class="keyword">null</span>) <span class="keyword">return</span> B;</span><br><span class="line">       <span class="keyword">if</span> (B == <span class="keyword">null</span>) <span class="keyword">return</span> A;</span><br><span class="line">       <span class="keyword">if</span> (A.length() &lt; B.length()) &#123;</span><br><span class="line">           String tmpStr = A;</span><br><span class="line">           A = B;</span><br><span class="line">           B = tmpStr;</span><br><span class="line">       &#125;</span><br><span class="line">       StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">       <span class="keyword">int</span> carry = <span class="number">0</span>, pointA = A.length() - <span class="number">1</span>, pointB = B.length() - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">while</span> (pointA &gt;= <span class="number">0</span> || pointB &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">if</span> (pointB &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">               <span class="keyword">int</span> value = A.charAt(pointA) - <span class="string">'0'</span> + B.charAt(pointB) - <span class="string">'0'</span> + carry;</span><br><span class="line">               result.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">               carry = value / <span class="number">10</span>;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">int</span> value = A.charAt(pointA) - <span class="string">'0'</span> + carry;</span><br><span class="line">               result.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">               carry = value / <span class="number">10</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           pointA --; pointB --;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> (carry != <span class="number">0</span>) result.insert(<span class="number">0</span>, carry);</span><br><span class="line">       <span class="keyword">return</span> result.toString();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> String <span class="title">minus</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (A == <span class="keyword">null</span> || B == <span class="keyword">null</span> || A.length() == <span class="number">0</span> || B.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">int</span> compareTag = compareTwoNumbers(A, B);</span><br><span class="line">       <span class="keyword">if</span> (compareTag == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"0"</span>;</span><br><span class="line">       <span class="keyword">if</span> (compareTag == -<span class="number">1</span>) &#123;</span><br><span class="line">           String tmp = A;</span><br><span class="line">           A = B;</span><br><span class="line">           B = tmp;</span><br><span class="line">       &#125;</span><br><span class="line">       StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">       <span class="keyword">int</span> indexA = A.length() - <span class="number">1</span>, indexB = B.length() - <span class="number">1</span>, carry = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span> (indexA &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">int</span> value = carry;</span><br><span class="line">           <span class="keyword">if</span> (indexB &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">               value += A.charAt(indexA) - <span class="string">'0'</span> - (B.charAt(indexB) - <span class="string">'0'</span>);</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               value += A.charAt(indexA) - <span class="string">'0'</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (value &lt; <span class="number">0</span>) &#123;</span><br><span class="line">               value += <span class="number">10</span>;</span><br><span class="line">               carry = -<span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           result.insert(<span class="number">0</span>, value);</span><br><span class="line">           indexA --; indexB --;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">int</span> zeroIndex = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span> (zeroIndex &lt; result.length() - <span class="number">1</span> &amp;&amp; result.charAt(zeroIndex) == <span class="string">'0'</span>) zeroIndex ++;</span><br><span class="line">       <span class="keyword">return</span> (compareTag == -<span class="number">1</span> ? <span class="string">"-"</span> : <span class="string">""</span>) + result.toString().substring(zeroIndex);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> String <span class="title">multiply</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (A == <span class="keyword">null</span> || B == <span class="keyword">null</span> || A.length() == <span class="number">0</span> || B.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">int</span> lastIndexA = A.length() - <span class="number">1</span>, lastIndexB = B.length() - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">int</span> totalLen = lastIndexA + lastIndexB + <span class="number">2</span>;</span><br><span class="line">       <span class="keyword">int</span>[] resultInt = <span class="keyword">new</span> <span class="keyword">int</span>[totalLen];</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> indexA = lastIndexA; indexA &gt;= <span class="number">0</span>; indexA --) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> indexB = lastIndexB; indexB &gt;= <span class="number">0</span>; indexB --) &#123;</span><br><span class="line">               <span class="keyword">int</span> curPosition = indexA + indexB + <span class="number">1</span>;</span><br><span class="line">               resultInt[curPosition] += (A.charAt(indexA) - <span class="string">'0'</span>) * (B.charAt(indexB) - <span class="string">'0'</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       StringBuilder resultStr = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">       <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> tmpIndex = resultInt.length - <span class="number">1</span>; tmpIndex &gt;= <span class="number">0</span>; tmpIndex --) &#123;</span><br><span class="line">           <span class="keyword">int</span> value = resultInt[tmpIndex] + carry;</span><br><span class="line">           resultStr.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">           carry = value / <span class="number">10</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">int</span> lastZeroIndex = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span> (lastZeroIndex &lt; resultStr.length() - <span class="number">1</span> &amp;&amp; resultStr.charAt(lastZeroIndex) == <span class="string">'0'</span>) lastZeroIndex ++;</span><br><span class="line">       <span class="keyword">return</span> resultStr.toString().substring(lastZeroIndex);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Follow-Up-with-negative-number"><a href="#Follow-Up-with-negative-number" class="headerlink" title="Follow Up: with negative number"></a>Follow Up: with negative number</h3><p>进行一系列的逻辑处理，比如<code>Add</code>中出现1个负数，就变换成<code>Minus</code>；如果出现两个负数，就变换成正数相加再在结果前加负号。</p>
<h3 id="Follow-Up-Big-Double"><a href="#Follow-Up-Big-Double" class="headerlink" title="Follow Up: Big Double"></a>Follow Up: Big Double</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">bigDoubleAdd</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">        doubleAddCarry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> dotIndexA = A.indexOf(<span class="string">"."</span>);</span><br><span class="line">        <span class="keyword">int</span> dotIndexB = B.indexOf(<span class="string">"."</span>);</span><br><span class="line">        String intA = dotIndexA == -<span class="number">1</span> ? A : A.substring(<span class="number">0</span>, dotIndexA);</span><br><span class="line">        String intB = dotIndexB == -<span class="number">1</span> ? B : B.substring(<span class="number">0</span>, dotIndexB);</span><br><span class="line">        String decimalA = dotIndexA == -<span class="number">1</span> ? <span class="string">""</span> : A.substring(dotIndexA + <span class="number">1</span>);</span><br><span class="line">        String decimalB = dotIndexB == -<span class="number">1</span> ? <span class="string">""</span> : B.substring(dotIndexB + <span class="number">1</span>);</span><br><span class="line">        String decimalSum = decimalAdd(decimalA, decimalB);</span><br><span class="line">        String intSum = intAdd(intA, intB);</span><br><span class="line">        <span class="keyword">return</span> intSum + (decimalSum == <span class="string">""</span> ? <span class="string">""</span> : (<span class="string">"."</span> + decimalSum));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> doubleAddCarry;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">decimalAdd</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (A.length() == <span class="number">0</span>) <span class="keyword">return</span> B;</span><br><span class="line">        <span class="keyword">if</span> (B.length() == <span class="number">0</span>) <span class="keyword">return</span> A;</span><br><span class="line">        <span class="keyword">if</span> (A.length() &lt; B.length()) &#123;</span><br><span class="line">            String tmp = A;</span><br><span class="line">            A = B;</span><br><span class="line">            B = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> lenA = A.length() - <span class="number">1</span>, lenB = B.length() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> indexA = lenA, indexB = lenB;</span><br><span class="line">        <span class="keyword">while</span> (indexA &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> value = A.charAt(indexA) - <span class="string">'0'</span> + doubleAddCarry;</span><br><span class="line">            <span class="keyword">if</span> (indexA &lt;= lenB) &#123;</span><br><span class="line">                value += B.charAt(indexB) - <span class="string">'0'</span>;</span><br><span class="line">                indexB --;</span><br><span class="line">            &#125;</span><br><span class="line">            result.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">            doubleAddCarry = value / <span class="number">10</span>;</span><br><span class="line">            indexA --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">intAdd</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (A.length() == <span class="number">0</span>) <span class="keyword">return</span> B;</span><br><span class="line">        <span class="keyword">if</span> (B.length() == <span class="number">0</span>) <span class="keyword">return</span> A;</span><br><span class="line">        <span class="keyword">if</span> (A.length() &lt; B.length()) &#123;</span><br><span class="line">            String tmp = A;</span><br><span class="line">            A = B;</span><br><span class="line">            B = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> lenA = A.length(), lenB = B.length() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> indexA = lenA - <span class="number">1</span>, indexB = lenB;</span><br><span class="line">        <span class="keyword">while</span> (indexA &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> value = A.charAt(indexA) - <span class="string">'0'</span> + doubleAddCarry;</span><br><span class="line">            <span class="keyword">if</span> (indexB &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                value += B.charAt(indexB) - <span class="string">'0'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            result.insert(<span class="number">0</span>, value % <span class="number">10</span>);</span><br><span class="line">            doubleAddCarry = value / <span class="number">10</span>;</span><br><span class="line">            indexA --; indexB --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (doubleAddCarry != <span class="number">0</span>) result.insert(<span class="number">0</span>, doubleAddCarry);</span><br><span class="line">        <span class="keyword">return</span> result.toString();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="17-SecretSanta"><a href="#17-SecretSanta" class="headerlink" title="17. SecretSanta"></a>17. SecretSanta</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String[][] testcases = &#123;&#123;<span class="string">"mary"</span>, <span class="string">"alice"</span>, <span class="string">"mike"</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (String[] friends : testcases) &#123;</span><br><span class="line">            ArrayList&lt;ArrayList&lt;String&gt;&gt; result = giftExchange(friends);</span><br><span class="line">            System.out.println(<span class="string">"result is: "</span>);</span><br><span class="line">            <span class="keyword">for</span> (ArrayList&lt;String&gt; oneSolution : result) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; oneSolution.size(); index ++) &#123;</span><br><span class="line">                    System.out.print(friends[index] + <span class="string">" -&gt; "</span> + oneSolution.get(index) + <span class="string">"   "</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;ArrayList&lt;String&gt;&gt; giftExchange(String[] friends) &#123;</span><br><span class="line">        ArrayList&lt;ArrayList&lt;String&gt;&gt; result = <span class="keyword">new</span> ArrayList&lt;ArrayList&lt;String&gt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (friends == <span class="keyword">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">        backtracking(result, <span class="keyword">new</span> ArrayList&lt;String&gt;(), friends, <span class="keyword">new</span> <span class="keyword">boolean</span>[friends.length]);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">backtracking</span><span class="params">(ArrayList&lt;ArrayList&lt;String&gt;&gt; result, ArrayList&lt;String&gt; tmpResult, String[] friends, <span class="keyword">boolean</span>[] visited)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tmpResult.size() == friends.length) &#123;</span><br><span class="line">            result.add(<span class="keyword">new</span> ArrayList&lt;&gt;(tmpResult));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; friends.length; i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (! visited[i] &amp;&amp; tmpResult.size() != i) &#123;</span><br><span class="line">                tmpResult.add(friends[i]);</span><br><span class="line">                visited[i] = <span class="keyword">true</span>;</span><br><span class="line">                backtracking(result, tmpResult, friends, visited);</span><br><span class="line">                tmpResult.remove(tmpResult.size() - <span class="number">1</span>);</span><br><span class="line">                visited[i] = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="18-Permutation"><a href="#18-Permutation" class="headerlink" title="18. Permutation"></a>18. Permutation</h2><p>leetcode 46: <a href="https://leetcode.com/problems/permutations/" target="_blank" rel="external">https://leetcode.com/problems/permutations/</a><br>leetcode 46: comtains duplicate<br>以下是包含duplicate的解法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">private List&lt;List&lt;Integer&gt;&gt; permute(int[] nums) &#123;</span><br><span class="line">       List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;List&lt;Integer&gt;&gt;();</span><br><span class="line">       Arrays.sort(nums);</span><br><span class="line">       backtracking(result, new ArrayList&lt;&gt;(), nums, new boolean[nums.length]);</span><br><span class="line">       return result;</span><br><span class="line">   &#125;</span><br><span class="line">   private void backtracking(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; tmpResult, int[] nums, boolean[] visited) &#123;</span><br><span class="line">       if (tmpResult.size() == nums.length) &#123;</span><br><span class="line">           result.add(new ArrayList&lt;&gt;(tmpResult));</span><br><span class="line">           return;</span><br><span class="line">       &#125;</span><br><span class="line">       for (int i = 0; i &lt; nums.length; i ++) &#123;</span><br><span class="line">           if (! visited[i]) &#123;</span><br><span class="line">               visited[i] = true;</span><br><span class="line">               tmpResult.add(nums[i]);</span><br><span class="line">               backtracking(result, tmpResult, nums, visited);</span><br><span class="line">               visited[i] = false;</span><br><span class="line">               tmpResult.remove(tmpResult.size() - 1);</span><br><span class="line">               while (i + 1 &lt; nums.length &amp;&amp; nums[i] == nums[i + 1]) i ++;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Follow-up-Next-Permutation"><a href="#Follow-up-Next-Permutation" class="headerlink" title="Follow up: Next Permutation"></a>Follow up: Next Permutation</h3><p>需要注意的是在两个<code>while</code>循环中临界值等于号的处理。相关的test case有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1,5,1], [5,1,1]</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">nextPermutation</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length &lt; <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">       <span class="keyword">int</span> index = nums.length - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">while</span> (index &gt; <span class="number">0</span> &amp;&amp; nums[index] &lt;= nums[index - <span class="number">1</span>]) index --;</span><br><span class="line">       <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">           Arrays.sort(nums);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">int</span> exchangeIndex = nums.length - <span class="number">1</span>;</span><br><span class="line">           <span class="keyword">while</span> (exchangeIndex &gt; index &amp;&amp; nums[exchangeIndex] &lt;= nums[index - <span class="number">1</span>]) exchangeIndex --;</span><br><span class="line">           <span class="keyword">int</span> tmp = nums[exchangeIndex];</span><br><span class="line">           nums[exchangeIndex] = nums[index - <span class="number">1</span>];</span><br><span class="line">           nums[index - <span class="number">1</span>] = tmp;</span><br><span class="line">           Arrays.sort(nums, index, nums.length);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="19-Game-of-Life"><a href="#19-Game-of-Life" class="headerlink" title="19. Game of Life"></a>19. Game of Life</h2><p>需要注意的是在判断邻居节点live的个数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span>[][] board = &#123;&#123;<span class="number">1</span>,<span class="number">1</span>&#125;, &#123;<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line">       gameOfLife(board);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">gameOfLife</span><span class="params">(<span class="keyword">int</span>[][] board)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (board == <span class="keyword">null</span> || board.length == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">       <span class="keyword">int</span> row = board.length, col = board[<span class="number">0</span>].length;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> rowIndex = <span class="number">0</span>; rowIndex &lt; row; rowIndex ++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> colIndex = <span class="number">0</span>; colIndex &lt; col; colIndex ++) &#123;</span><br><span class="line">               <span class="keyword">int</span> liveCount = <span class="number">0</span>;</span><br><span class="line">               <span class="keyword">for</span> (<span class="keyword">int</span> neighbourRowIndex = Math.max(<span class="number">0</span>, rowIndex - <span class="number">1</span>); neighbourRowIndex &lt;= Math.min(row - <span class="number">1</span>, rowIndex + <span class="number">1</span>); neighbourRowIndex ++) &#123;</span><br><span class="line">                   <span class="keyword">for</span> (<span class="keyword">int</span> neighbourColIndex = Math.max(<span class="number">0</span>, colIndex - <span class="number">1</span>); neighbourColIndex &lt;= Math.min(col - <span class="number">1</span>, colIndex + <span class="number">1</span>); neighbourColIndex ++) &#123;</span><br><span class="line">                       <span class="keyword">if</span> (neighbourRowIndex == rowIndex &amp;&amp; neighbourColIndex == colIndex) <span class="keyword">continue</span>;</span><br><span class="line">                       <span class="keyword">if</span> (board[neighbourRowIndex][neighbourColIndex] == <span class="number">1</span> || board[neighbourRowIndex][neighbourColIndex] == <span class="number">2</span>) liveCount ++;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">if</span> (board[rowIndex][colIndex] == <span class="number">1</span> &amp;&amp; (liveCount &lt; <span class="number">2</span> || liveCount &gt; <span class="number">3</span>)) board[rowIndex][colIndex] = <span class="number">2</span>;</span><br><span class="line">               <span class="keyword">else</span> <span class="keyword">if</span> (board[rowIndex][colIndex] == <span class="number">0</span> &amp;&amp; liveCount == <span class="number">3</span>) board[rowIndex][colIndex] = <span class="number">3</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> rowIndex = <span class="number">0</span>; rowIndex &lt; row; rowIndex ++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> colIndex = <span class="number">0</span>; colIndex &lt; col; colIndex ++) &#123;</span><br><span class="line">               board[rowIndex][colIndex] &amp;= <span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Follow-Up-infinite-board"><a href="#Follow-Up-infinite-board" class="headerlink" title="Follow Up: infinite board"></a>Follow Up: infinite board</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gameOfLifeInfinite</span><span class="params">(<span class="keyword">int</span>[][] board)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (board == <span class="keyword">null</span> || board.length == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">       HashSet&lt;Cell&gt; live = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       <span class="keyword">int</span> row = board.length, col = board[<span class="number">0</span>].length;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i ++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j ++) &#123;</span><br><span class="line">               <span class="keyword">if</span> (board[i][j] == <span class="number">1</span>) live.add(<span class="keyword">new</span> Cell(i, j));</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       live = gameOfLife(live);</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i ++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j ++) &#123;</span><br><span class="line">               <span class="keyword">if</span> (live.contains(<span class="keyword">new</span> Cell(i, j))) board[i][j] = <span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Cell</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> x, y;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Cell</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.x = x;</span><br><span class="line">           <span class="keyword">this</span>.y = y;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> o <span class="keyword">instanceof</span> Cell &amp;&amp; ((Cell)o).x == <span class="keyword">this</span>.x &amp;&amp; ((Cell)o).y == <span class="keyword">this</span>.y;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           <span class="keyword">int</span> hashCode = <span class="number">1</span>;</span><br><span class="line">           hashCode = hashCode * <span class="number">31</span> + <span class="keyword">this</span>.x;</span><br><span class="line">           hashCode = hashCode * <span class="number">31</span> + <span class="keyword">this</span>.y;</span><br><span class="line">           <span class="keyword">return</span> hashCode;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> HashSet&lt;Cell&gt; <span class="title">gameOfLife</span><span class="params">(HashSet&lt;Cell&gt; live)</span> </span>&#123;</span><br><span class="line">       HashMap&lt;Cell, Integer&gt; neighbours = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (Cell cell : live) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> x = cell.x - <span class="number">1</span>; x &lt;= cell.x + <span class="number">1</span>; x ++) &#123;</span><br><span class="line">               <span class="keyword">for</span> (<span class="keyword">int</span> y = cell.y - <span class="number">1</span>; y &lt;= cell.y + <span class="number">1</span>; y ++) &#123;</span><br><span class="line">                   <span class="keyword">if</span> (x == cell.x &amp;&amp; y == cell.y) <span class="keyword">continue</span>;</span><br><span class="line">                   Cell neighbour = <span class="keyword">new</span> Cell(x, y);</span><br><span class="line">                   neighbours.put(neighbour, neighbours.getOrDefault(neighbour, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       HashSet&lt;Cell&gt; nextStates = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (Cell cell : neighbours.keySet()) &#123;</span><br><span class="line">           <span class="keyword">if</span> (neighbours.get(cell) == <span class="number">3</span> || (live.contains(cell) &amp;&amp; neighbours.get(cell) == <span class="number">2</span>)) nextStates.add(cell);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> nextStates;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="20-Trapping-Water-Problem"><a href="#20-Trapping-Water-Problem" class="headerlink" title="20. Trapping Water Problem"></a>20. Trapping Water Problem</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">trappingRainWater</span><span class="params">(<span class="keyword">int</span>[] heights)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (heights == <span class="keyword">null</span> || heights.length &lt; <span class="number">3</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> leftIndex=<span class="number">0</span>, rightIndex=heights.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> leftBounds = <span class="number">0</span>, rightBounds = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(leftIndex &lt;= rightIndex)&#123;</span><br><span class="line">            leftBounds = Math.max(leftBounds, heights[leftIndex]);</span><br><span class="line">            rightBounds = Math.max(rightBounds, heights[rightIndex]);</span><br><span class="line">            <span class="keyword">if</span>(leftBounds &lt; rightBounds)&#123;</span><br><span class="line">                result += leftBounds - heights[leftIndex];</span><br><span class="line">                leftIndex ++;</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                result += rightBounds - heights[rightIndex];</span><br><span class="line">                rightIndex --;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2016/10/28/Algorithm-Exercise-2/">Algorithm Exercise 2</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">Pengfei Xing</a></p>
        <p><span>发布时间:</span>2016-10-28, 13:56:44</p>
        <p><span>最后更新:</span>2017-05-01, 23:56:44</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2016/10/28/Algorithm-Exercise-2/" title="Algorithm Exercise 2">http://yoursite.com/2016/10/28/Algorithm-Exercise-2/</a>
            <span class="copy-path" data-clipboard-text="原文: http://yoursite.com/2016/10/28/Algorithm-Exercise-2/　　作者: Pengfei Xing" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2016/10/29/Algorithm-Exercise-3/">
                    Algorithm Exercise 3
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/10/27/Algorithm-exercise-1/">
                    Algorithm exercise 1
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-Detect-Cycle-in-Graph"><span class="toc-number">1.</span> <span class="toc-text">11. Detect Cycle in Graph</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-Bipart-Graph"><span class="toc-number">2.</span> <span class="toc-text">12. Bipart Graph</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-Toggle"><span class="toc-number">3.</span> <span class="toc-text">13. Toggle</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-find-String-combined-by-given-char"><span class="toc-number">4.</span> <span class="toc-text">14. find String combined by given char</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-Detect-deadlock-in-log-file"><span class="toc-number">5.</span> <span class="toc-text">15. Detect deadlock in log file</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-Big-Int"><span class="toc-number">6.</span> <span class="toc-text">16. Big Int</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Follow-Up-with-negative-number"><span class="toc-number">6.1.</span> <span class="toc-text">Follow Up: with negative number</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Follow-Up-Big-Double"><span class="toc-number">6.2.</span> <span class="toc-text">Follow Up: Big Double</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-SecretSanta"><span class="toc-number">7.</span> <span class="toc-text">17. SecretSanta</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-Permutation"><span class="toc-number">8.</span> <span class="toc-text">18. Permutation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Follow-up-Next-Permutation"><span class="toc-number">8.1.</span> <span class="toc-text">Follow up: Next Permutation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-Game-of-Life"><span class="toc-number">9.</span> <span class="toc-text">19. Game of Life</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Follow-Up-infinite-board"><span class="toc-number">9.1.</span> <span class="toc-text">Follow Up: infinite board</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-Trapping-Water-Problem"><span class="toc-number">10.</span> <span class="toc-text">20. Trapping Water Problem</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"Algorithm Exercise 2　| 邢鹏飞的博客　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/10/29/Algorithm-Exercise-3/" title="上一篇: Algorithm Exercise 3">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/10/27/Algorithm-exercise-1/" title="下一篇: Algorithm exercise 1">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/01/01/写在岁末年初（2016）/">写在岁末年初（2016）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/18/Algorithm-Exercise-7/">Algorithm Exercise 7(Lyft)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/15/hash相关/">hash相关</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/14/Java死锁例子/">Java死锁例子</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/14/Java中abstract和interface区别/">Java中abstract和interface区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/11/Algorithm-Exercise-6/">Algorithm Exercise 6</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/01/Algorithm-Exercise-5/">Algorithm Exercise 5</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/30/Algorithm-Exercise-4/">Algorithm Exercise 4</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/29/Algorithm-Exercise-3/">Algorithm Exercise 3</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/28/Algorithm-Exercise-2/">Algorithm Exercise 2</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/27/Algorithm-exercise-1/">Algorithm exercise 1</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/22/Java中将自定义类做为Hash-Key时需要注意的地方/">Java中将自定义类做为Hash Key时需要注意的地方</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/28/Java不常用语法cheat-sheet/">Java不常用语法cheat sheet</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/22/类Sweep-Line问题分析/">类Sweep Line问题分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/20/Java中的比较器重写/">Java中的比较器重写</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/31/英语俚语/">英语俚语</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/09/Terminal-Command-Cheat-Sheet/">Terminal Command Cheat Sheet</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/13/Android事件处理/">Android事件处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/12/Android笔记/">Android笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/07/IOS开发中的四大对象及程序启动过程混讲/">IOS开发中的四大对象及程序启动过程混讲</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/20/用户系统设计流程/">用户系统设计流程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/16/SpriteKit项目总结（一）/">SpriteKit项目总结（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/24/导航控制器/">导航控制器</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/16/通过NodeJS和MongoDB创建RESTful-API/">通过NodeJS和MongoDB创建RESTful API</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/16/MongoDB开发笔记/">MongoDB开发笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/16/aws-开发笔记/">AWS开发笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/13/Sprite-Kit学习笔记/">Sprite Kit学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/11/知乎日报App-UI-Framework/">知乎日报App UI Framework</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/09/IOS沙盒简介/">IOS沙盒简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/02/从判断括号字符串是否有效看代码优化/">从有效括号判断代码看代码优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/28/有向图的单源最短路径算法实现/">有向图的单源最短路径算法实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/28/面向对象设计/">面向对象设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/26/Trie的典型应用/">单词查找树（Trie）的典型应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/25/Java疑难问题/">Java疑难问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/23/basic-algorithm/">Basic Algorithm</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/22/Top-K问题/">top k问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/19/图的遍历分析/">图的遍历分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/18/Java中ArrayList排序/">Java中ArrayList排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/18/区间重叠问题/">区间重叠问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/14/kmpknuth-morris-pratt-algorithm/">KMP(Knuth–Morris–Pratt) Algorithm</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/13/shuffling-algorithm/">Shuffling Algorithm</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/07/Scrappy安装注意事项/">Scrappy 安装注意事项</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/02/unity-3d-note/">Unity 3D Note</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/08/sina-microblog-app-for-apple-watch/">Sina Microblog App for Apple Watch</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/31/写在岁末年初/">写在岁末年初（2015）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/23/Uschedule-APP-Diary/">Uschedule APP</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/12/Watch-OS学习笔记/">WatchOS学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/07/IOS学习笔记/">IOS学习笔记（零碎笔记）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/05/IOS开发笔记（代码块篇）/">IOS开发笔记（代码块篇）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/05/IOS规范总结/">IOS规范总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/26/IOS开发笔记（Bug篇）/">IOS开发笔记（大小坑篇）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/26/Git-Cheat-Sheet/">git cheat sheet</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/24/IOS开发笔记（第三方框架篇）/">IOS 开发笔记（第三方框架篇）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/18/introduction-to-bloom-filter/">analysis to bloom filter</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/09/google-onsite/">google onsite</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 Pengfei Xing
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>