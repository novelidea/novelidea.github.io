<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>邢鹏飞的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="邢鹏飞的博客">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="邢鹏飞的博客">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="邢鹏飞的博客">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="邢鹏飞的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://o6szdc7js.bkt.clouddn.com/blog_profile_new.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Pengfei Xing</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">文章</a></li>
				        
							<li><a href="/tags/Mobile">移动开发</a></li>
				        
							<li><a href="/tags/FullStack">全栈</a></li>
				        
							<li><a href="/tags/System">系统</a></li>
				        
							<li><a href="/tags/algorithm">算法</a></li>
				        
							<li><a href="/tags/Diary">随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/novelidea" title="github">github</a>
					        
								<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/pengfei-xing-65886578" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Algorithm/" style="font-size: 20px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 11.67px;">Android</a> <a href="/tags/Backend/" style="font-size: 13.33px;">Backend</a> <a href="/tags/Cheet-Sheet/" style="font-size: 10px;">Cheet Sheet</a> <a href="/tags/Diary/" style="font-size: 13.33px;">Diary</a> <a href="/tags/FullStack/" style="font-size: 15px;">FullStack</a> <a href="/tags/Game/" style="font-size: 10px;">Game</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/IOS/" style="font-size: 16.67px;">IOS</a> <a href="/tags/Java/" style="font-size: 11.67px;">Java</a> <a href="/tags/Mobile/" style="font-size: 18.33px;">Mobile</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/OOD/" style="font-size: 10px;">OOD</a> <a href="/tags/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tags/Scrappy/" style="font-size: 10px;">Scrappy</a> <a href="/tags/SpriteKit/" style="font-size: 11.67px;">SpriteKit</a> <a href="/tags/System/" style="font-size: 10px;">System</a> <a href="/tags/Unity/" style="font-size: 10px;">Unity</a> <a href="/tags/WatchOS/" style="font-size: 10px;">WatchOS</a> <a href="/tags/系统/" style="font-size: 10px;">系统</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Pengfei Xing</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://o6szdc7js.bkt.clouddn.com/blog_profile_new.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Pengfei Xing</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">文章</a></li>
		        
					<li><a href="/tags/Mobile">移动开发</a></li>
		        
					<li><a href="/tags/FullStack">全栈</a></li>
		        
					<li><a href="/tags/System">系统</a></li>
		        
					<li><a href="/tags/algorithm">算法</a></li>
		        
					<li><a href="/tags/Diary">随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/novelidea" title="github">github</a>
			        
						<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/pengfei-xing-65886578" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-Algorithm-exercise-1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/27/Algorithm-exercise-1/" class="article-date">
  	<time datetime="2016-10-27T22:06:30.000Z" itemprop="datePublished">2016-10-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/27/Algorithm-exercise-1/">Algorithm exercise 1</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-对角线打印矩阵"><a href="#1-对角线打印矩阵" class="headerlink" title="1. 对角线打印矩阵"></a>1. 对角线打印矩阵</h3><p>Input:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;1,2,3,4&#125;, &#123;5,6,7,8&#125;, &#123;9,10,11,12&#125;, &#123;13,14,15,16&#125;, &#123;17,18,19,20&#125;&#125;</span><br></pre></td></tr></table></figure></p>
<p>Output:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1  </span><br><span class="line">2  5  </span><br><span class="line">3  6  9  </span><br><span class="line">4  7  10  13  </span><br><span class="line">8  11  14  17  </span><br><span class="line">12  15  18  </span><br><span class="line">16  19  </span><br><span class="line">20</span><br></pre></td></tr></table></figure></p>
<p>Code<br>笔误： colIndex -&gt; rowIndex<br>边界条件应该是： colCount - 1<br>总的循环条件是row col都必须满足</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">zagzigPrintMatrix</span><span class="params">(<span class="keyword">int</span>[][] matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (matrix == <span class="keyword">null</span> || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> rowCount = matrix.length, colCount = matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span> rowIndex = <span class="number">0</span>, colIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(rowIndex &lt; rowCount &amp;&amp; colIndex &lt; colCount) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmpRowIndex = rowIndex, tmpColIndex = colIndex;</span><br><span class="line">            <span class="keyword">while</span> (tmpRowIndex &lt; rowCount &amp;&amp; tmpColIndex &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.print(matrix[tmpRowIndex ++][tmpColIndex --] + <span class="string">"  "</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">            <span class="keyword">if</span> (colIndex &lt; colCount - <span class="number">1</span>) &#123;</span><br><span class="line">                colIndex ++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                rowIndex ++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] matrix = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;, &#123;<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;, &#123;<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>,<span class="number">12</span>&#125;, &#123;<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>&#125;,&#123;<span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>&#125;&#125;;</span><br><span class="line">        zagzigPrintMatrix(matrix);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-Merge-K-Sorted-Lists"><a href="#2-Merge-K-Sorted-Lists" class="headerlink" title="2. Merge K Sorted Lists"></a>2. Merge K Sorted Lists</h3><p>经常漏<code>)</code>，因为一般网页版ide的自动补全优点问题；<br>在构造函数<code>Pair</code>中漏掉<code>int</code>。</p>
<p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> val, row, col;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(<span class="keyword">int</span> val, <span class="keyword">int</span> row, <span class="keyword">int</span> col)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">            <span class="keyword">this</span>.row = row;</span><br><span class="line">            <span class="keyword">this</span>.col = col;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title">mergeKSortedList</span><span class="params">(<span class="keyword">int</span>[][] lists)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">if</span> (lists == <span class="keyword">null</span> || lists.length == <span class="number">0</span>) <span class="keyword">return</span> result;</span><br><span class="line">        PriorityQueue&lt;Pair&gt; queue = <span class="keyword">new</span> PriorityQueue&lt;Pair&gt;(<span class="keyword">new</span> Comparator&lt;Pair&gt;() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Pair p1, Pair p2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> p1.val - p2.val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> rowIndex = <span class="number">0</span>; rowIndex &lt; lists.length; rowIndex ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (lists[rowIndex].length == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            queue.offer(<span class="keyword">new</span> Pair(lists[rowIndex][<span class="number">0</span>], rowIndex, <span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (! queue.isEmpty()) &#123;</span><br><span class="line">            Pair curPair = queue.poll();</span><br><span class="line">            result.add(curPair.val);</span><br><span class="line">            <span class="keyword">if</span> (curPair.col &lt; lists[curPair.row].length - <span class="number">1</span>) &#123;</span><br><span class="line">                queue.offer(<span class="keyword">new</span> Pair(lists[curPair.row][curPair.col + <span class="number">1</span>], curPair.row, curPair.col + <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] lists = &#123;&#123;<span class="number">1</span>, <span class="number">9</span>&#125;, &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;, &#123;<span class="number">3</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>&#125;, &#123;<span class="number">11</span>&#125;&#125;;</span><br><span class="line">        List&lt;Integer&gt; result = mergeKSortedList(lists);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> num : result) &#123;</span><br><span class="line">            System.out.print(num + <span class="string">"  "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span>[][] lists = &#123;&#123;&#125;, &#123;<span class="number">1</span>&#125;, &#123;<span class="number">1</span>,<span class="number">2</span>&#125;, &#123;<span class="number">1</span>,<span class="number">2</span>&#125;, &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;, &#123;<span class="number">6</span>,<span class="number">7</span>&#125;&#125;;</span><br><span class="line">       Node[] headsList = constructListList(lists);</span><br><span class="line">       Node head = mergeKSortedList(headsList);</span><br><span class="line">       Node tmp = head;</span><br><span class="line">       <span class="keyword">while</span> (tmp != <span class="keyword">null</span>) &#123;</span><br><span class="line">           System.out.print(tmp.val + <span class="string">"  "</span>);</span><br><span class="line">           tmp = tmp.next;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">private</span> Node[] constructListList(<span class="keyword">int</span>[][] values) &#123;</span><br><span class="line">       <span class="keyword">if</span> (values == <span class="keyword">null</span> || values.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       Node[] result = <span class="keyword">new</span> Node[values.length];</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; values.length; i ++) &#123;</span><br><span class="line">           result[i] = constructList(values[i]);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> Node <span class="title">constructList</span><span class="params">(<span class="keyword">int</span>[] values)</span> </span>&#123;</span><br><span class="line">       Node dummy = <span class="keyword">new</span> Node(<span class="number">0</span>);</span><br><span class="line">       Node pre = dummy;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> val : values) &#123;</span><br><span class="line">           Node node = <span class="keyword">new</span> Node(val);</span><br><span class="line">           pre.next = node;</span><br><span class="line">           pre = pre.next;</span><br><span class="line">       &#125;</span><br><span class="line">       pre.next = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">return</span> dummy.next;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> val;</span><br><span class="line">       Node next;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.val = val;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> Node <span class="title">mergeKSortedList</span><span class="params">(Node[] heads)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (heads == <span class="keyword">null</span> || heads.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       PriorityQueue&lt;Node&gt; priorityQueue = <span class="keyword">new</span> PriorityQueue&lt;&gt;(<span class="keyword">new</span> Comparator&lt;Node&gt;() &#123;</span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Node nodeA, Node nodeB)</span> </span>&#123;</span><br><span class="line">               <span class="keyword">return</span> nodeA.val - nodeB.val;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; heads.length; i ++) &#123;</span><br><span class="line">           <span class="keyword">if</span> (heads[i] == <span class="keyword">null</span>) <span class="keyword">continue</span>;</span><br><span class="line">           priorityQueue.offer(heads[i]);</span><br><span class="line">       &#125;</span><br><span class="line">       Node dummy = <span class="keyword">new</span> Node(<span class="number">0</span>);</span><br><span class="line">       Node tmpNode = dummy;</span><br><span class="line">       <span class="keyword">while</span> (! priorityQueue.isEmpty()) &#123;</span><br><span class="line">           Node minValueNode = priorityQueue.poll();</span><br><span class="line">           tmpNode.next = minValueNode;</span><br><span class="line">           tmpNode = tmpNode.next;</span><br><span class="line">           minValueNode = minValueNode.next;</span><br><span class="line">           <span class="keyword">if</span> (minValueNode != <span class="keyword">null</span>) priorityQueue.offer(minValueNode);</span><br><span class="line">       &#125;</span><br><span class="line">       tmpNode.next = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">return</span> dummy.next;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-Valid-Sodoku"><a href="#3-Valid-Sodoku" class="headerlink" title="3. Valid Sodoku"></a>3. Valid Sodoku</h3><p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValidSodoku</span><span class="params">(<span class="keyword">char</span>[][] board)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (board == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       <span class="keyword">int</span> row = board.length, col = board[<span class="number">0</span>].length;</span><br><span class="line">       <span class="keyword">if</span> (row != <span class="number">9</span> || col != <span class="number">9</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       HashSet&lt;String&gt; visited = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> rowIndex = <span class="number">0</span>; rowIndex &lt; <span class="number">9</span>; rowIndex ++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> colIndex = <span class="number">0</span>; colIndex &lt; <span class="number">9</span>; colIndex ++) &#123;</span><br><span class="line">               <span class="keyword">if</span> (board[rowIndex][colIndex] == <span class="string">'.'</span>) <span class="keyword">continue</span>;</span><br><span class="line">               String value = <span class="string">"("</span> + board[rowIndex][colIndex] + <span class="string">")"</span>;</span><br><span class="line">               <span class="keyword">if</span> (!visited.add(rowIndex + value) || ! visited.add(value + colIndex) || ! visited.add(rowIndex / <span class="number">3</span> + value + colIndex / <span class="number">3</span>)) &#123;</span><br><span class="line">                   <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-添加-是整型数组的结果最大"><a href="#4-添加-是整型数组的结果最大" class="headerlink" title="4. 添加 + * () 是整型数组的结果最大"></a>4. 添加 + * () 是整型数组的结果最大</h3><p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">addOperatorToMaxResult</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="comment">// dp[endIndex][cutNumber] meas nums[0] ~ nums[endIndex] split into cutNumber parts, the maximum value</span></span><br><span class="line">        <span class="comment">// dp[endIndex][cutNumber] = Math.max(dp[endIndex][cutNumber], dp[tmpIndex][cutNumber - 1] * sum[tmpIndex + 1][endIndex])</span></span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len + <span class="number">1</span>][len + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span>[] sum = <span class="keyword">new</span> <span class="keyword">int</span>[len + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">1</span>; index &lt;= len; index ++) &#123;</span><br><span class="line">            sum[index] = sum[index - <span class="number">1</span>] + nums[index - <span class="number">1</span>];</span><br><span class="line">            dp[index][<span class="number">1</span>] = sum[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> endIndex = <span class="number">2</span>; endIndex &lt;= len; endIndex ++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> cutNumber = <span class="number">2</span>; cutNumber &lt;= endIndex; cutNumber ++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> lastPartStartIndex = cutNumber; lastPartStartIndex &lt;= endIndex; lastPartStartIndex ++) &#123;</span><br><span class="line">                    dp[endIndex][cutNumber] = Math.max(dp[endIndex][cutNumber], dp[lastPartStartIndex - <span class="number">1</span>][cutNumber - <span class="number">1</span>] * (sum[endIndex] - sum[lastPartStartIndex - <span class="number">1</span>]));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (endIndex == len) &#123;</span><br><span class="line">                    result = Math.max(result, dp[endIndex][cutNumber]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">maxResultContainsNegative</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">int</span>[][] max = <span class="keyword">new</span> <span class="keyword">int</span>[len + <span class="number">1</span>][len + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span>[][] min = <span class="keyword">new</span> <span class="keyword">int</span>[len + <span class="number">1</span>][len + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span>[] sum = <span class="keyword">new</span> <span class="keyword">int</span>[len + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">1</span>; index &lt;= len; index ++) &#123;</span><br><span class="line">            sum[index] = sum[index - <span class="number">1</span>] + nums[index - <span class="number">1</span>];</span><br><span class="line">            max[index][<span class="number">1</span>] = sum[index];</span><br><span class="line">            min[index][<span class="number">1</span>] = sum[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> result = Integer.MIN_VALUE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> endIndex = <span class="number">1</span>; endIndex &lt;= len; endIndex ++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> partNumber = <span class="number">2</span>; partNumber &lt;= len; partNumber ++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> lastPartStartIndex = partNumber; lastPartStartIndex &lt;= endIndex; lastPartStartIndex ++) &#123;</span><br><span class="line">                    <span class="keyword">int</span> lastSum = sum[endIndex] - sum[lastPartStartIndex - <span class="number">1</span>];</span><br><span class="line">                    max[endIndex][partNumber] = Math.max(max[endIndex][partNumber], lastSum * (lastSum &gt; <span class="number">0</span> ? max[lastPartStartIndex - <span class="number">1</span>][partNumber - <span class="number">1</span>] : min[lastPartStartIndex - <span class="number">1</span>][partNumber - <span class="number">1</span>]));</span><br><span class="line">                    min[endIndex][partNumber] = Math.min(min[endIndex][partNumber], lastSum * (lastSum &gt; <span class="number">0</span> ? min[lastPartStartIndex - <span class="number">1</span>][partNumber - <span class="number">1</span>] : max[lastPartStartIndex - <span class="number">1</span>][partNumber - <span class="number">1</span>]));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (endIndex == len) &#123;</span><br><span class="line">                    result = Math.max(result, max[endIndex][partNumber]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] nums = &#123;-<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line">        <span class="comment">// int res1 = addOperatorToMaxResult(nums);</span></span><br><span class="line">        <span class="keyword">int</span> res2 = maxResultContainsNegative(nums);</span><br><span class="line">        System.out.println(res2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;**</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] numbers = &#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> result = maximumResult(numbers);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maximumResult</span><span class="params">(<span class="keyword">int</span>[] numbers)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (numbers == <span class="keyword">null</span> || numbers.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> length = numbers.length;</span><br><span class="line">        <span class="keyword">int</span>[] sum = <span class="keyword">new</span> <span class="keyword">int</span>[length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length + <span class="number">1</span>][length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= length; i ++) &#123;</span><br><span class="line">            sum[i] = sum[i - <span class="number">1</span>] + numbers[i - <span class="number">1</span>];</span><br><span class="line">            dp[i][<span class="number">1</span>] = sum[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> result = dp[length][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> tmpLen = <span class="number">2</span>; tmpLen &lt;= length; tmpLen ++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> partNumber = <span class="number">2</span>; partNumber &lt;= tmpLen; partNumber ++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> lastPartStartIndex = partNumber; lastPartStartIndex &lt; tmpLen; lastPartStartIndex++) &#123;</span><br><span class="line"><span class="comment">//                    这里需要注意的是 dp[lastPartStartIndex - 1][partNumber - 1], lastPartStartIndex 该变量代表了前 lastPartStartIndex 个数字,因为所有坐标是从1开始的.</span></span><br><span class="line">                    dp[tmpLen][partNumber] = Math.max(dp[tmpLen][partNumber], dp[lastPartStartIndex - <span class="number">1</span>][partNumber - <span class="number">1</span>] * (sum[tmpLen] - sum[lastPartStartIndex - <span class="number">1</span>]));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (tmpLen == length) &#123;</span><br><span class="line">                    result = Math.max(result, dp[tmpLen][partNumber]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-Find-Min-or-Target-in-Rotated-Array"><a href="#5-Find-Min-or-Target-in-Rotated-Array" class="headerlink" title="5. Find Min or Target in Rotated Array"></a>5. Find Min or Target in Rotated Array</h3><p>Code</p>
<p>在找min时：在求mid的时候, left + (right - left) / 2;<br>在找target时：深刻理解 target 和 nums[mid] 比较的原因！</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">findMinIndex</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[left] &lt; nums[right]) &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[mid] &gt; nums[right]) &#123;</span><br><span class="line">                    left = mid + <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    right = mid;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] nums = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> res = findMinIndex(nums);</span><br><span class="line">        System.out.println(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] nums = &#123;<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line"><span class="comment">//        int res = findMin(nums);</span></span><br><span class="line">        <span class="keyword">int</span> res = findTargetIndex(nums, <span class="number">10</span>);</span><br><span class="line">        System.out.println(res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findMin</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == nums || nums.length &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[left] &gt; nums[right]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[mid] &gt; nums[right]) &#123;</span><br><span class="line">                    left = mid + <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    right = mid;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums[left];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findMinContainsDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[left] &gt; nums[right]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[mid] &lt; nums[right]) &#123;</span><br><span class="line">                    right = mid;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    left = mid + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[left] &lt; nums[right])&#123;</span><br><span class="line">                right = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                right --;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums[left];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findTargetIndex</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] == target) <span class="keyword">return</span> mid;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt; target) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[left] &gt; nums[right] &amp;&amp; nums[mid] &gt; nums[right] &amp;&amp; target &lt;= nums[right]) &#123;</span><br><span class="line">                    left = mid + <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    right = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[left] &gt; nums[right] &amp;&amp; nums[mid] &lt; nums[left] &amp;&amp; target &gt;= nums[left]) &#123;</span><br><span class="line">                    right = mid - <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    left = mid + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums[left] == target ? left : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-Frog-Jump"><a href="#6-Frog-Jump" class="headerlink" title="6. Frog Jump"></a>6. Frog Jump</h3><p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] testCases = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">12</span>,<span class="number">17</span>&#125;, &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">11</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] stones : testCases) &#123;</span><br><span class="line">            <span class="keyword">boolean</span> result = canJumpToTheEnd(stones);</span><br><span class="line">            System.out.println(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canJumpToTheEnd</span><span class="params">(<span class="keyword">int</span>[] stones)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (stones == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        HashMap&lt;Integer, HashSet&lt;Integer&gt;&gt; nextPosition = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> position : stones) nextPosition.put(position, <span class="keyword">new</span> HashSet&lt;Integer&gt;());</span><br><span class="line">        nextPosition.get(<span class="number">0</span>).add(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> destination = stones[stones.length - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> pos : stones) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> step : nextPosition.get(pos)) &#123;</span><br><span class="line">                <span class="keyword">int</span> dest = pos + step;</span><br><span class="line">                <span class="keyword">if</span> (dest == destination) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">if</span> (nextPosition.containsKey(dest)) &#123;</span><br><span class="line">                    nextPosition.get(dest).add(step);</span><br><span class="line">                    nextPosition.get(dest).add(step + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span> (step &gt; <span class="number">1</span>) nextPosition.get(dest).add(step - <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-Course-Schedule-Two"><a href="#7-Course-Schedule-Two" class="headerlink" title="7. Course Schedule Two"></a>7. Course Schedule Two</h3><p>注意点：可能在输入的prerequisites数组中有重复的，所以在初始化map的时候需要检验是否已经录入改该prerequisite。</p>
<p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span>[][] testCase1 = &#123;&#123;<span class="number">1</span>,<span class="number">0</span>&#125;, &#123;<span class="number">2</span>,<span class="number">0</span>&#125;,&#123;<span class="number">3</span>,<span class="number">1</span>&#125;,&#123;<span class="number">3</span>,<span class="number">2</span>&#125;&#125;;</span><br><span class="line">       <span class="keyword">int</span>[][] testCase2 = &#123;&#123;<span class="number">5</span>,<span class="number">8</span>&#125;, &#123;<span class="number">3</span>,<span class="number">5</span>&#125;,&#123;<span class="number">1</span>,<span class="number">9</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">0</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">9</span>&#125;,&#123;<span class="number">7</span>,<span class="number">8</span>&#125;,&#123;<span class="number">4</span>,<span class="number">9</span>&#125;&#125;;</span><br><span class="line">       <span class="keyword">int</span>[] result = findOrder(<span class="number">10</span>, testCase2);</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i : result) &#123;</span><br><span class="line">           System.out.println(i);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">int</span>[] findOrder(<span class="keyword">int</span> numCourses, <span class="keyword">int</span>[][] prerequisites) &#123;</span><br><span class="line">       <span class="keyword">int</span>[] indegree = <span class="keyword">new</span> <span class="keyword">int</span>[numCourses];</span><br><span class="line">       HashMap&lt;Integer, HashSet&lt;Integer&gt;&gt; prerequisiteMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numCourses; i ++) &#123;</span><br><span class="line">           prerequisiteMap.put(i, <span class="keyword">new</span> HashSet&lt;&gt;());</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span>[] prerequisite : prerequisites) &#123;</span><br><span class="line">           <span class="keyword">if</span>(prerequisiteMap.get(prerequisite[<span class="number">1</span>]).add(prerequisite[<span class="number">0</span>])) &#123;</span><br><span class="line">               indegree[prerequisite[<span class="number">0</span>]] ++;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[numCourses];</span><br><span class="line">       <span class="keyword">int</span> resultIndex = <span class="number">0</span>;</span><br><span class="line">       Queue&lt;Integer&gt; nextScheduledCourse = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numCourses; i ++) &#123;</span><br><span class="line">           <span class="keyword">if</span> (indegree[i] == <span class="number">0</span>) nextScheduledCourse.add(i);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">while</span> (! nextScheduledCourse.isEmpty()) &#123;</span><br><span class="line">           <span class="keyword">int</span> size = nextScheduledCourse.size();</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i ++) &#123;</span><br><span class="line">               <span class="keyword">int</span> prerequisiteCouse = nextScheduledCourse.poll();</span><br><span class="line">               result[resultIndex ++] = prerequisiteCouse;</span><br><span class="line">               <span class="keyword">for</span> (<span class="keyword">int</span> nextCourse : prerequisiteMap.get(prerequisiteCouse)) &#123;</span><br><span class="line">                   indegree[nextCourse] --;</span><br><span class="line">                   <span class="keyword">if</span> (indegree[nextCourse] == <span class="number">0</span>) &#123;</span><br><span class="line">                       nextScheduledCourse.offer(nextCourse);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> resultIndex == numCourses ? result : <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-Restore-IP-Address"><a href="#8-Restore-IP-Address" class="headerlink" title="8. Restore IP Address"></a>8. Restore IP Address</h3><p>用四重循环方法做的时候需要注意循环边界条件：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">restoreIpAddresses</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() &lt; <span class="number">4</span> || s.length() &gt; <span class="number">12</span>) <span class="keyword">return</span> result;</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> firstEnd = <span class="number">0</span>; firstEnd &lt; <span class="number">3</span> &amp;&amp; firstEnd &lt; len - <span class="number">3</span>; firstEnd ++) &#123;</span><br><span class="line">            String first = s.substring(<span class="number">0</span>, firstEnd + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (Integer.valueOf(first) &gt; <span class="number">255</span> || (first.length() &gt; <span class="number">1</span> &amp;&amp; first.charAt(<span class="number">0</span>) == <span class="string">'0'</span>)) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> secondEnd = firstEnd + <span class="number">1</span>; secondEnd &lt;= firstEnd + <span class="number">3</span> &amp;&amp; secondEnd &lt; len - <span class="number">2</span>; secondEnd ++) &#123;</span><br><span class="line">                String second = s.substring(firstEnd + <span class="number">1</span>, secondEnd + <span class="number">1</span>);</span><br><span class="line">                <span class="comment">// System.out.println(second);</span></span><br><span class="line">                <span class="keyword">if</span> (Integer.valueOf(second) &gt; <span class="number">255</span> || (second.length() &gt; <span class="number">1</span> &amp;&amp; second.charAt(<span class="number">0</span>) == <span class="string">'0'</span>)) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> thirdEnd = secondEnd + <span class="number">1</span>; thirdEnd &lt;= secondEnd + <span class="number">3</span> &amp;&amp; thirdEnd &lt; len - <span class="number">1</span>; thirdEnd ++) &#123;</span><br><span class="line">                    String third = s.substring(secondEnd + <span class="number">1</span>, thirdEnd + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span> (Integer.valueOf(third) &gt; <span class="number">255</span> || (third.length() &gt; <span class="number">1</span> &amp;&amp; third.charAt(<span class="number">0</span>) == <span class="string">'0'</span>)) <span class="keyword">continue</span>;</span><br><span class="line">                    String fourth = s.substring(thirdEnd + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span> (Integer.valueOf(fourth) &gt; <span class="number">255</span> || (fourth.length() &gt; <span class="number">1</span> &amp;&amp; fourth.charAt(<span class="number">0</span>) == <span class="string">'0'</span>)) <span class="keyword">continue</span>;</span><br><span class="line">                    result.add(first + <span class="string">"."</span> + second + <span class="string">"."</span> + third + <span class="string">"."</span> + fourth);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String[] ips = &#123;<span class="string">"255255255255"</span>, <span class="string">"25525511135"</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (String ip : ips) &#123;</span><br><span class="line">            ArrayList&lt;String&gt; resultSol1 = restoreIP(ip);</span><br><span class="line">            ArrayList&lt;String&gt; resultSol2 = restoreIPSolutionTwo(ip);</span><br><span class="line">            System.out.println(<span class="string">"result is"</span>);</span><br><span class="line">            <span class="keyword">for</span> (String res : resultSol2) &#123;</span><br><span class="line">                System.out.print(res + <span class="string">"   "</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">restoreIP</span><span class="params">(String ip)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (ip.length() &gt; <span class="number">12</span> || ip.length() &lt; <span class="number">4</span>) <span class="keyword">return</span> result;</span><br><span class="line">        dfs(result, <span class="keyword">new</span> ArrayList&lt;&gt;(), ip, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(ArrayList&lt;String&gt; result, ArrayList&lt;String&gt; tmp, String ip, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">4</span> &amp;&amp; ip.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            result.add(String.join(<span class="string">"."</span>, tmp));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span> &amp;&amp; i &lt;= ip.length(); i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">1</span> &amp;&amp; ip.charAt(<span class="number">0</span>) == <span class="string">'0'</span>) <span class="keyword">break</span>;</span><br><span class="line">            String curPart = ip.substring(<span class="number">0</span>, i);</span><br><span class="line">            <span class="keyword">if</span> (Integer.valueOf(curPart) &gt; <span class="number">255</span>) <span class="keyword">break</span>;</span><br><span class="line">            tmp.add(ip.substring(<span class="number">0</span>, i));</span><br><span class="line">            dfs(result, tmp, ip.substring(i), index + <span class="number">1</span>);</span><br><span class="line">            tmp.remove(tmp.size() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">restoreIPSolutionTwo</span><span class="params">(String ip)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> ipLen = ip.length();</span><br><span class="line">        <span class="keyword">if</span> (ipLen &gt; <span class="number">12</span> || ipLen &lt; <span class="number">4</span>) <span class="keyword">return</span> result;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> firstEndIndex = <span class="number">1</span>; firstEndIndex &lt; <span class="number">4</span> &amp;&amp; firstEndIndex &lt; ipLen - <span class="number">2</span>; firstEndIndex ++) &#123;</span><br><span class="line">            String firstPart = ip.substring(<span class="number">0</span>, firstEndIndex);</span><br><span class="line">            <span class="keyword">if</span> (! isValid(firstPart)) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> secondEndIndex = firstEndIndex + <span class="number">1</span>; secondEndIndex &lt; firstEndIndex + <span class="number">4</span> &amp;&amp; secondEndIndex &lt; ipLen - <span class="number">1</span>; secondEndIndex ++) &#123;</span><br><span class="line">                String secondPart = ip.substring(firstEndIndex, secondEndIndex);</span><br><span class="line">                <span class="keyword">if</span> (! isValid(secondPart)) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> thirdEndIndex = secondEndIndex + <span class="number">1</span>; thirdEndIndex &lt; secondEndIndex + <span class="number">4</span> &amp;&amp; thirdEndIndex &lt; ipLen; thirdEndIndex ++) &#123;</span><br><span class="line">                    String thirdPart = ip.substring(secondEndIndex, thirdEndIndex);</span><br><span class="line">                    <span class="keyword">if</span> (! isValid(thirdPart)) <span class="keyword">break</span>;</span><br><span class="line">                    String fourthPart = ip.substring(thirdEndIndex);</span><br><span class="line">                    <span class="keyword">if</span> (isValid(fourthPart)) &#123;</span><br><span class="line">                        result.add(firstPart + <span class="string">"."</span> + secondPart + <span class="string">"."</span> + thirdPart + <span class="string">"."</span> + fourthPart);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ((s.length() &gt; <span class="number">1</span> &amp;&amp; s.charAt(<span class="number">0</span>) == <span class="string">'0'</span>) || Integer.valueOf(s) &gt; <span class="number">255</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-XML-Parser"><a href="#9-XML-Parser" class="headerlink" title="9. XML Parser"></a>9. XML Parser</h3><p>最后直接返回root就可以了，而不必返回stack.peek()，事实上这样也会出错。</p>
<p>Code</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       ArrayList&lt;String&gt; input = <span class="keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(<span class="string">"open,story"</span>,</span><br><span class="line">               <span class="string">"open,id"</span>,</span><br><span class="line">               <span class="string">"inner,1234"</span>,</span><br><span class="line">               <span class="string">"close,id"</span>,</span><br><span class="line">               <span class="string">"open,snaps"</span>,</span><br><span class="line">               <span class="string">"open,snap"</span>,</span><br><span class="line">               <span class="string">"close,snap"</span>,</span><br><span class="line">               <span class="string">"open,snap"</span>,</span><br><span class="line">               <span class="string">"close,snap"</span>,</span><br><span class="line">               <span class="string">"open,snap"</span>,</span><br><span class="line">               <span class="string">"close,snap"</span>,</span><br><span class="line">               <span class="string">"open,snap"</span>,</span><br><span class="line">               <span class="string">"close,snap"</span>,</span><br><span class="line">               <span class="string">"close,snaps"</span>,</span><br><span class="line">               <span class="string">"close,story"</span>));</span><br><span class="line">       XMLNode root = parser(input);</span><br><span class="line">       print(root, <span class="number">0</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(XMLNode root, <span class="keyword">int</span> level)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; level; i ++) System.out.print(<span class="string">" "</span>);</span><br><span class="line">       <span class="keyword">if</span> (root.children.size() == <span class="number">0</span>) &#123;</span><br><span class="line">           System.out.println(<span class="string">"&lt;"</span> + root.tagName + <span class="string">"&gt;"</span> + root.value + <span class="string">"&lt;/"</span> + root.tagName + <span class="string">"&gt;"</span>);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           System.out.println(<span class="string">"&lt;"</span> + root.tagName + <span class="string">"&gt;"</span>);</span><br><span class="line">           <span class="keyword">for</span> (XMLNode child : root.children) &#123;</span><br><span class="line">               print(child, level + <span class="number">1</span>);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; level; i ++) System.out.print(<span class="string">" "</span>);</span><br><span class="line">           System.out.println(<span class="string">"&lt;/"</span> + root.tagName + <span class="string">"&gt;"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">XMLNode</span> </span>&#123;</span><br><span class="line">       String type;</span><br><span class="line">       String tagName;</span><br><span class="line">       String value = <span class="string">""</span>;</span><br><span class="line">       ArrayList&lt;XMLNode&gt; children;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">XMLNode</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.type = type;</span><br><span class="line">           <span class="keyword">this</span>.children = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> XMLNode <span class="title">parser</span><span class="params">(ArrayList&lt;String&gt; input)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (input == <span class="keyword">null</span> || input.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       Stack&lt;XMLNode&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">       String[] firstNodeValues = input.get(<span class="number">0</span>).split(<span class="string">","</span>);</span><br><span class="line">       XMLNode root = <span class="keyword">new</span> XMLNode(firstNodeValues[<span class="number">0</span>]);</span><br><span class="line">       root.tagName = firstNodeValues[<span class="number">1</span>];</span><br><span class="line">       stack.push(root);</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; input.size(); i ++) &#123;</span><br><span class="line">           String str = input.get(i);</span><br><span class="line">           String[] strs = str.split(<span class="string">","</span>);</span><br><span class="line">           <span class="keyword">if</span> (strs[<span class="number">0</span>].equals(<span class="string">"inner"</span>)) &#123;</span><br><span class="line">               stack.peek().value = strs[<span class="number">1</span>];</span><br><span class="line">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (strs[<span class="number">0</span>].equals(<span class="string">"open"</span>)) &#123;</span><br><span class="line">               XMLNode node = <span class="keyword">new</span> XMLNode(strs[<span class="number">0</span>]);</span><br><span class="line">               node.tagName = strs[<span class="number">1</span>];</span><br><span class="line">               <span class="keyword">if</span> (! stack.isEmpty()) &#123;</span><br><span class="line">                   stack.peek().children.add(node);</span><br><span class="line">               &#125;</span><br><span class="line">               stack.push(node);</span><br><span class="line">           &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">               stack.pop();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> root;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="10-24-Game"><a href="#10-24-Game" class="headerlink" title="10. 24 Game"></a>10. 24 Game</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] nums = &#123;&#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>, <span class="number">9</span>&#125;, &#123;<span class="number">4</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>&#125;, &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">8</span>&#125;, &#123;<span class="number">4</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">9</span>&#125;, &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] num : nums) &#123;</span><br><span class="line">            <span class="keyword">boolean</span> result = gameSolution(num);</span><br><span class="line">            System.out.println(<span class="string">"result is:  "</span> + result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">gameSolution</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">return</span> computerValue(nums, <span class="keyword">new</span> ArrayList&lt;&gt;(), <span class="keyword">new</span> <span class="keyword">boolean</span>[nums.length]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">computerValue</span><span class="params">(<span class="keyword">int</span>[] nums, ArrayList&lt;Integer&gt; reorderedNumbers, <span class="keyword">boolean</span>[] visited)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (reorderedNumbers.size() == nums.length) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> value : generatePartValue(reorderedNumbers, <span class="number">0</span>, nums.length - <span class="number">1</span>)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (value == <span class="number">24</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visited[i] || i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i - <span class="number">1</span>] &amp;&amp; !visited[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            visited[i] = <span class="keyword">true</span>;</span><br><span class="line">            reorderedNumbers.add(nums[i]);</span><br><span class="line">            <span class="keyword">if</span> (computerValue(nums, reorderedNumbers, visited)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            reorderedNumbers.remove(reorderedNumbers.size() - <span class="number">1</span>);</span><br><span class="line">            visited[i] = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> HashSet&lt;Integer&gt; <span class="title">generatePartValue</span><span class="params">(ArrayList&lt;Integer&gt; nums, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">        HashSet&lt;Integer&gt; result = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (start == end) &#123;</span><br><span class="line">            result.add(nums.get(start));</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = start; index &lt; end; index ++) &#123;</span><br><span class="line">            HashSet&lt;Integer&gt; lefts = generatePartValue(nums, start, index);</span><br><span class="line">            HashSet&lt;Integer&gt; rights = generatePartValue(nums, index + <span class="number">1</span>, end);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> left : lefts) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> right : rights) &#123;</span><br><span class="line">                    result.add(left + right);</span><br><span class="line">                    result.add(left - right);</span><br><span class="line">                    result.add(left * right);</span><br><span class="line">                    <span class="keyword">if</span> (right != <span class="number">0</span>) result.add(left / right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Java中将自定义类做为Hash-Key时需要注意的地方" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/22/Java中将自定义类做为Hash-Key时需要注意的地方/" class="article-date">
  	<time datetime="2016-10-23T06:06:50.000Z" itemprop="datePublished">2016-10-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/22/Java中将自定义类做为Hash-Key时需要注意的地方/">Java中将自定义类做为Hash Key时需要注意的地方</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Java在处理自定义类做为Hash Key时（或者拓宽到任意的对象），比较往往是根据reference比较的，而不是根据value，如果有需要根据value进行比较的需求的话，则需要在类中重写 <code>equals</code> 和 <code>hashCode</code> 两个方法，具体以重写二维矩阵中每个横纵坐标对来举个🌰。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cell</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Cell</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.x = x;</span><br><span class="line">            <span class="keyword">this</span>.y = y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> o <span class="keyword">instanceof</span> Cell &amp;&amp; ((Cell)o).x == <span class="keyword">this</span>.x &amp;&amp; ((Cell)o).y == <span class="keyword">this</span>.y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> hashCode = <span class="number">1</span>;</span><br><span class="line">            hashCode = hashCode * <span class="number">31</span> + <span class="keyword">this</span>.x;</span><br><span class="line">            hashCode = hashCode * <span class="number">31</span> + <span class="keyword">this</span>.y;</span><br><span class="line">            <span class="keyword">return</span> hashCode;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Java不常用语法cheat-sheet" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/09/28/Java不常用语法cheat-sheet/" class="article-date">
  	<time datetime="2016-09-28T19:22:55.000Z" itemprop="datePublished">2016-09-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/28/Java不常用语法cheat-sheet/">Java不常用语法cheat sheet</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="File"><a href="#File" class="headerlink" title="File"></a>File</h3><h5 id="Read-File"><a href="#Read-File" class="headerlink" title="Read File"></a>Read File</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">readFile</span><span class="params">(String filePath)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; content = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String encoding = <span class="string">"GBK"</span>;</span><br><span class="line">            File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">            <span class="keyword">if</span> (file.isFile() &amp;&amp; file.exists()) &#123; </span><br><span class="line">                <span class="comment">// If file exists.</span></span><br><span class="line">                <span class="comment">// Considering encode method</span></span><br><span class="line">                InputStreamReader read = <span class="keyword">new</span> InputStreamReader(</span><br><span class="line">                        <span class="keyword">new</span> FileInputStream(file), encoding);</span><br><span class="line">                BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(read);</span><br><span class="line">                String lineTxt = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">while</span> ((lineTxt = bufferedReader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    content.add(lineTxt);</span><br><span class="line">                &#125;</span><br><span class="line">                bufferedReader.close();</span><br><span class="line">                read.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"Cannot find the file"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Find error when reading file content"</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="Write-File"><a href="#Write-File" class="headerlink" title="Write File"></a>Write File</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeFile</span><span class="params">(ArrayList&lt;String&gt; content, String filePath)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            FileWriter writer = <span class="keyword">new</span> FileWriter(filePath);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; content.size(); i ++) &#123;</span><br><span class="line">                writer.write(content.get(i) + <span class="string">"\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            writer.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Find error when writing file"</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Multi-Thread"><a href="#Multi-Thread" class="headerlink" title="Multi Thread"></a>Multi Thread</h3><h4 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by novelidea on 9/29/16.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MultiThreadDemo</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Thread t;</span><br><span class="line">    <span class="keyword">private</span> String threadName;</span><br><span class="line">    MultiThreadDemo( String name) &#123;</span><br><span class="line">        threadName = name;</span><br><span class="line">        System.out.println(<span class="string">"Creating "</span> +  threadName );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Running "</span> +  threadName );</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">4</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread: "</span> + threadName + <span class="string">", "</span> + i);</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Thread "</span> +  threadName + <span class="string">" interrupted."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"Thread "</span> +  threadName + <span class="string">" exiting."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Starting "</span> +  threadName );</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="keyword">null</span>) &#123;</span><br><span class="line">            t = <span class="keyword">new</span> Thread (<span class="keyword">this</span>, threadName);</span><br><span class="line">            t.start ();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-类Sweep-Line问题分析" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/09/22/类Sweep-Line问题分析/" class="article-date">
  	<time datetime="2016-09-22T20:44:23.000Z" itemprop="datePublished">2016-09-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/22/类Sweep-Line问题分析/">类Sweep Line问题分析</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>最近发现了一种非常有意思的算法，叫做Sweep Line，但是该算法问题界定的范围不像DP, Greedy那么明确，所以暂称类Sweep Line问题吧。下面就通过实际问题来阐述。</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><h4 id="最长递增子序列问题"><a href="#最长递增子序列问题" class="headerlink" title="最长递增子序列问题"></a>最长递增子序列问题</h4><p>该问题的描述如下：<br>给定一个未排序的序列，找到其中最长的递增子序列，可以不连续。一般该问题可以用 DP 来解决，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == nums || <span class="number">1</span> &gt; nums.length) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">int</span>[] opt = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        Arrays.fill(opt, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i ++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j ++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[i] &gt; nums[j]) &#123;</span><br><span class="line">                    opt[i] = Math.max(opt[i], opt[j] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            result = Math.max(result, opt[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该 DP 算法的时间复杂度为<code>O(n^2)</code>。这是大部分算法学习者都可以达到的正常水平，但是在这之外，我无意中发现有人用开挂技能来KO这道题，这就是文章一开始说的 Sweep Line 算法，而该算法可以达到<code>O(nlog(n))</code>的时间复杂度。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">    <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> x : nums) &#123;</span><br><span class="line">    	<span class="keyword">int</span> i = <span class="number">0</span>, j = size;</span><br><span class="line">       	<span class="keyword">while</span> (i != j) &#123;</span><br><span class="line">        	<span class="keyword">int</span> m = (i + j) / <span class="number">2</span>;</span><br><span class="line">           	<span class="keyword">if</span> (result[m] &lt; x)</span><br><span class="line">            	i = m + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            	j = m;</span><br><span class="line">        &#125;</span><br><span class="line">       	result[i] = x;</span><br><span class="line">        <span class="keyword">if</span> (i == size) ++size;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该算法主要是维护了一个已经访问过的最长的递增序列，当新的数来临时，找到序列中第一个比该数大的数进行替换，如果都比该数小，则将该数放到递增子序列的末尾，递增子序列长度加一。所以外层遍历时间复杂度是<code>O(n)</code>,而由于递增子序列已经递增有序，所以找到第一个比该数大的数可以用二分查找，时间复杂度是 <code>O(log(n))</code>。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Java中的比较器重写" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/09/20/Java中的比较器重写/" class="article-date">
  	<time datetime="2016-09-20T21:04:59.000Z" itemprop="datePublished">2016-09-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/20/Java中的比较器重写/">Java中的比较器重写</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>Java中经常会遇到重写比较器的情况，比如给某个自定义类根据一个属性的值进行排序，今天看到一个非常经典的数据结构设计的问题，不仅问题设计很好，中间居然还会重写两种比较器（因为之前接触的都是单独出现的），不禁拍案叫绝！</p>
<p>问题是要求设计一个简化版Twitter的数据结构，能够支持post, follow, unfollow几种操作，具体要求如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. postTweet(userId, tweetId): Compose a new tweet.</span><br><span class="line">2. getNewsFeed(userId): Retrieve the 10 most recent tweet ids in the user&apos;s news feed. Each item in the news feed must be posted by users who the user followed or by the user herself. Tweets must be ordered from most recent to least recent.</span><br><span class="line">3. follow(followerId, followeeId): Follower follows a followee.</span><br><span class="line">4. unfollow(followerId, followeeId): Follower unfollows a followee.</span><br></pre></td></tr></table></figure>
<h3 id="分析思路"><a href="#分析思路" class="headerlink" title="分析思路"></a>分析思路</h3><p>首先，需要为该系统引入两个HashMap。第一个Map是<code>&lt;User, List&lt;User&gt;&gt;</code>，主要用来记录某个用户关注的用户列表；第二个Map是<code>&lt;User, List&lt;Twitter&gt;&gt;</code>，主要用来记录某个用户发送的所有微博。</p>
<p>功能1只需要修改第二个Map，比较easy;<br>功能3，4只需要修改第一个Map；<br>功能三需要通过建立小顶堆来实现，较前几个功能稍显复杂。</p>
<p>正如开头所说，代码中比较有意思的是两种比较器的重写。第一种是给自定义类写比较器，比如在后续代码中需要用到该类的比较、排序等等。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">A</span>&gt; </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> val;</span><br><span class="line">	&lt;!--do something here--&gt;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(A other)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.val - other.val; &lt;!--Increasing Order--&gt;</span><br><span class="line">		<span class="keyword">return</span> other.val - <span class="keyword">this</span>.val; &lt;!--Decreasing Order--&gt;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>第二种是在容器的sort方法中重写。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A[] arr = <span class="keyword">new</span> A[<span class="number">10</span>];</span><br><span class="line">Collections.sort(A, <span class="keyword">new</span> Comparator&lt;A&gt;()&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(A a, A b)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a.val - b.val; &lt;!--Increasing Order--&gt;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Twitter</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">TContent</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">TContent</span>&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">int</span> id;</span><br><span class="line">        <span class="keyword">int</span> tweetId;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TContent</span><span class="params">(<span class="keyword">int</span> id, <span class="keyword">int</span> tweetId)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.id = id;</span><br><span class="line">            <span class="keyword">this</span>.tweetId = tweetId;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(TContent other)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.id - other.id;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    Map&lt;Integer, Set&lt;Integer&gt;&gt; follow;</span><br><span class="line">    Map&lt;Integer, List&lt;TContent&gt;&gt; tweet;</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Twitter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        follow = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        tweet = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        id = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Compose a new tweet. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postTweet</span><span class="params">(<span class="keyword">int</span> userId, <span class="keyword">int</span> tweetId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (! tweet.containsKey(userId)) tweet.put(userId, <span class="keyword">new</span> ArrayList&lt;TContent&gt;());</span><br><span class="line">        List&lt;TContent&gt; tweets = tweet.get(userId);</span><br><span class="line">        tweets.add(<span class="keyword">new</span> TContent(id ++, tweetId));</span><br><span class="line">        tweet.put(userId, tweets);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Retrieve the 10 most recent tweet ids in the user's news feed. Each item in the news feed must be posted by users who the user followed or by the user herself. Tweets must be ordered from most recent to least recent. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getNewsFeed</span><span class="params">(<span class="keyword">int</span> userId)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; users = follow.containsKey(userId) ? follow.get(userId) : <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">        users.add(userId);</span><br><span class="line">        PriorityQueue&lt;TContent&gt; queue = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Integer, List&lt;TContent&gt;&gt; e : tweet.entrySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (users.contains(e.getKey())) &#123;</span><br><span class="line">                List&lt;TContent&gt; ts = e.getValue();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ts.size(); i ++) &#123;</span><br><span class="line">                    queue.add(ts.get(i));</span><br><span class="line">                    <span class="keyword">if</span> (queue.size() &gt; <span class="number">10</span>) queue.poll();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;TContent&gt; tmp = <span class="keyword">new</span> ArrayList&lt;TContent&gt;();</span><br><span class="line">        <span class="keyword">while</span> (! queue.isEmpty()) &#123;</span><br><span class="line">            tmp.add(queue.poll());</span><br><span class="line">        &#125;</span><br><span class="line">        Collections.sort(tmp, <span class="keyword">new</span> Comparator&lt;TContent&gt;() &#123;</span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(TContent a, TContent b)</span> </span>&#123;</span><br><span class="line">               <span class="keyword">return</span> b.id - a.id;</span><br><span class="line">           &#125; </span><br><span class="line">        &#125;);</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tmp.size(); i ++) &#123;</span><br><span class="line">            result.add(tmp.get(i).tweetId);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Follower follows a followee. If the operation is invalid, it should be a no-op. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">follow</span><span class="params">(<span class="keyword">int</span> followerId, <span class="keyword">int</span> followeeId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (! follow.containsKey(followerId)) follow.put(followerId, <span class="keyword">new</span> HashSet&lt;Integer&gt;());</span><br><span class="line">        Set&lt;Integer&gt; followees = follow.get(followerId);</span><br><span class="line">        followees.add(followeeId);</span><br><span class="line">        follow.put(followerId, followees);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Follower unfollows a followee. If the operation is invalid, it should be a no-op. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unfollow</span><span class="params">(<span class="keyword">int</span> followerId, <span class="keyword">int</span> followeeId)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; followees = follow.get(followerId);</span><br><span class="line">        <span class="keyword">if</span> (followees == <span class="keyword">null</span> || !followees.contains(followeeId)) <span class="keyword">return</span>;</span><br><span class="line">        followees.remove(followeeId);</span><br><span class="line">        follow.put(followerId, followees);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-英语俚语" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/31/英语俚语/" class="article-date">
  	<time datetime="2016-08-01T04:27:18.000Z" itemprop="datePublished">2016-07-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/31/英语俚语/">英语俚语</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>I’m on the fence</li>
<li>You’re the dogface</li>
<li>get laid with a girl</li>
<li>you’re insolvent</li>
<li>you’re broke</li>
<li>it’s none of my business</li>
<li>knock yourself out</li>
<li>really is a small world</li>
<li>gather faster please</li>
<li>Little more about me</li>
<li>It’s completely crap </li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Diary/">Diary</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Terminal-Command-Cheat-Sheet" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/09/Terminal-Command-Cheat-Sheet/" class="article-date">
  	<time datetime="2016-07-09T19:49:27.000Z" itemprop="datePublished">2016-07-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/09/Terminal-Command-Cheat-Sheet/">Terminal Command Cheat Sheet</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Hexo-Blog"><a href="#Hexo-Blog" class="headerlink" title="Hexo Blog"></a>Hexo Blog</h2><h3 id="generate-blog-site"><a href="#generate-blog-site" class="headerlink" title="generate blog site"></a>generate blog site</h3><p>hexo generate</p>
<h3 id="deploy-blog-on-local-server"><a href="#deploy-blog-on-local-server" class="headerlink" title="deploy blog on local server"></a>deploy blog on local server</h3><p>hexo server</p>
<h3 id="deploy-to-github"><a href="#deploy-to-github" class="headerlink" title="deploy to github"></a>deploy to github</h3><p>hexo deploy</p>
<h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="check-thread-id-using-port-number"><a href="#check-thread-id-using-port-number" class="headerlink" title="check thread id using port #number"></a>check thread id using port #number</h3><p>lsof -i :number</p>
<h3 id="kill-process-by-PID"><a href="#kill-process-by-PID" class="headerlink" title="kill process by PID"></a>kill process by PID</h3><p>kill -9 [pid]</p>
<h2 id="VIM"><a href="#VIM" class="headerlink" title="VIM"></a>VIM</h2><h3 id="vertically-split-a-file"><a href="#vertically-split-a-file" class="headerlink" title="vertically split a file"></a>vertically split a file</h3><p>:vsp filename or :vs filename</p>
<h3 id="horizontallly-split-a-file"><a href="#horizontallly-split-a-file" class="headerlink" title="horizontallly split a file"></a>horizontallly split a file</h3><p>:sp filename</p>
<h3 id="move-cursor-between-multiple-windows"><a href="#move-cursor-between-multiple-windows" class="headerlink" title="move cursor between multiple windows"></a>move cursor between multiple windows</h3><p>ctr-w direction-key</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cheet-Sheet/">Cheet Sheet</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/FullStack/">FullStack</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Android事件处理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/13/Android事件处理/" class="article-date">
  	<time datetime="2016-05-13T18:24:44.000Z" itemprop="datePublished">2016-05-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/13/Android事件处理/">Android事件处理</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Button事件处理"><a href="#Button事件处理" class="headerlink" title="Button事件处理"></a>Button事件处理</h2><p>安卓中给Button添加事件处理主要有两种方法。第一种方法是直接在layout中添加button时注册时间处理方法，然后再去java文件中实现该方法；第二种方法是在java文件中通过id获取该button，然后直接添加监听事件方法。</p>
<h3 id="layout文件中注册时间处理方法"><a href="#layout文件中注册时间处理方法" class="headerlink" title="layout文件中注册时间处理方法"></a>layout文件中注册时间处理方法</h3><p>首先在layout文件中添加button的时候加上时间处理方法名。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button"</span></span><br><span class="line">        ...</span><br><span class="line">        android:onClick=<span class="string">"buttonClickHandler"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后鼠标放在该注册方法上，按住<code>opt</code> + <code>Enter</code>，弹出需要实现该方法的java文件列表（如果工程中只有一个java文件，则默认该文件），最后在选定的目标文件中实现该方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buttonClickHandler</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        EditText et = (EditText) findViewById(R.id.nameText);</span><br><span class="line">        String name = et.getText().toString();</span><br><span class="line">        Snackbar.make(coordinatorLayout,</span><br><span class="line">                <span class="string">"Your name is: "</span> + name, Snackbar.LENGTH_LONG)</span><br><span class="line">                .setAction(<span class="string">"Action"</span>, <span class="keyword">null</span>).show();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="直接给按钮添加事件处理方法"><a href="#直接给按钮添加事件处理方法" class="headerlink" title="直接给按钮添加事件处理方法"></a>直接给按钮添加事件处理方法</h3><p>该方法直接通过id获取按钮，然后给按钮添加监听事件方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Button button = (Button) findViewById(R.id.SubmitButton);</span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                EditText et = (EditText) findViewById(R.id.nameText);</span><br><span class="line">                String entry = et.getText().toString();</span><br><span class="line">                Snackbar.make(v, <span class="string">"You entered: "</span> + entry, Snackbar.LENGTH_LONG)</span><br><span class="line">                        .setAction(<span class="string">"Action"</span>, <span class="keyword">null</span>).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mobile/">Mobile</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Android笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/12/Android笔记/" class="article-date">
  	<time datetime="2016-05-12T18:12:42.000Z" itemprop="datePublished">2016-05-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/12/Android笔记/">Android笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Android-Studio快捷方式"><a href="#Android-Studio快捷方式" class="headerlink" title="Android Studio快捷方式"></a>Android Studio快捷方式</h2><h3 id="reformate-code-in-order-to-make-it-easier-to-read"><a href="#reformate-code-in-order-to-make-it-easier-to-read" class="headerlink" title="reformate code in order to make it easier to read"></a>reformate code in order to make it easier to read</h3><p><code>Mac</code>: cmd + opt + l<br><code>Win</code>: ctr + alt + l</p>
<h3 id="find-file-in-the-entire-project"><a href="#find-file-in-the-entire-project" class="headerlink" title="find file in the entire project"></a>find file in the entire project</h3><p>double click <code>shift</code></p>
<h3 id="自动纠错"><a href="#自动纠错" class="headerlink" title="自动纠错"></a>自动纠错</h3><p>opt + Enter</p>
<h3 id="Refactor"><a href="#Refactor" class="headerlink" title="Refactor"></a>Refactor</h3><p>ctl + shift + R</p>
<h3 id="自动补全"><a href="#自动补全" class="headerlink" title="自动补全"></a>自动补全</h3><p>ctl + space：如果选项唯一，则自动补全。<br>例子:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:src=<span class="string">"@drawable/logo"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="提取dimension-resource"><a href="#提取dimension-resource" class="headerlink" title="提取dimension resource"></a>提取dimension resource</h3><p>提取dimension resource目的相当于给数字创建全局变量，方便以后修改。方法是鼠标定位到该行，然后按住<code>opt</code> + <code>Enter</code>即可。</p>
<h2 id="Android-Project理解"><a href="#Android-Project理解" class="headerlink" title="Android Project理解"></a>Android Project理解</h2><ol>
<li><p>layout加载顺序<br>先是家在<code>xml</code>中的layout设置，然后再加载代码中的layout。</p>
</li>
<li><p>Debug方法<br>在logcat中过滤出AndroidRuntime日志。</p>
</li>
</ol>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h3 id="Toast"><a href="#Toast" class="headerlink" title="Toast"></a>Toast</h3><p>Android Studio中输入<code>Toast</code>，然后回车便可出线代码如下代码模板：<br>Toast.makeText(MainActivity.this, “”, Toast.LENGTH_SHORT).show();<br>Toast显示的内容不受程序生命周期影响，即使在toast持续时间范围内关闭程序，toast内容也会显示。</p>
<h3 id="布局参数"><a href="#布局参数" class="headerlink" title="布局参数"></a>布局参数</h3><h4 id="相对位置"><a href="#相对位置" class="headerlink" title="相对位置"></a>相对位置</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">android:layout_above=<span class="string">"@+id/photo"</span></span><br><span class="line">android:layout_below=<span class="string">"@+id/imageView"</span></span><br><span class="line">android:layout_alignParentBottom=<span class="string">"true"</span></span><br><span class="line">android:layout_centerHorizontal=<span class="string">"true"</span></span><br></pre></td></tr></table></figure>
<h3 id="图片展示"><a href="#图片展示" class="headerlink" title="图片展示"></a>图片展示</h3><h4 id="静态展示方法"><a href="#静态展示方法" class="headerlink" title="静态展示方法"></a>静态展示方法</h4><p>直接在layout文件定义ImageView时赋值。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">    ...</span><br><span class="line">	android:src=<span class="string">"@drawable/logo"</span> /&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="动态展示方法"><a href="#动态展示方法" class="headerlink" title="动态展示方法"></a>动态展示方法</h4><h5 id="根据图片在工程文件中的路径获取图片"><a href="#根据图片在工程文件中的路径获取图片" class="headerlink" title="根据图片在工程文件中的路径获取图片"></a>根据图片在工程文件中的路径获取图片</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ImageView iv = (ImageView) findViewById(R.id.photo);</span><br><span class="line">iv.setImageResource(R.drawable.jacket101);</span><br></pre></td></tr></table></figure>
<h5 id="根据图片名字获取图片"><a href="#根据图片名字获取图片" class="headerlink" title="根据图片名字获取图片"></a>根据图片名字获取图片</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ImageView iv = (ImageView) findViewById(R.id.photo);</span><br><span class="line">String imageName = <span class="string">"jacket101"</span>;</span><br><span class="line"><span class="keyword">int</span> res = getResources().getIdentifier(imageName, <span class="string">"drawable"</span>, getPackageName());</span><br><span class="line">iv.setImageResource(res);</span><br></pre></td></tr></table></figure>
<h5 id="通过asset来获取图片"><a href="#通过asset来获取图片" class="headerlink" title="通过asset来获取图片"></a>通过asset来获取图片</h5><p>添加asset方法：Android-&gt;app-&gt;File-&gt;New-&gt;Folder-&gt;Assets Folder。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	InputStream stream = getAssets().open(imageName + <span class="string">".png"</span>);</span><br><span class="line">    Drawable d = Drawable.createFromStream(stream, <span class="keyword">null</span>);</span><br><span class="line">    iv.setImageDrawable(d);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mobile/">Mobile</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-IOS开发中的四大对象及程序启动过程混讲" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/07/IOS开发中的四大对象及程序启动过程混讲/" class="article-date">
  	<time datetime="2016-05-08T02:43:54.000Z" itemprop="datePublished">2016-05-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/07/IOS开发中的四大对象及程序启动过程混讲/">IOS开发中的四大对象及程序启动过程混讲</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>IOS中的四大对象即UIApplication, appDelegate, UIWindow, UIViewController，之所以和程序启动过程混讲，是因为程序启动和它们密不可分。<br>UIApplication对象是应用程序的象征，每个App只有一个该对象，即UIApplication是单例，且是IOS程序启动创建的第一个对象,可以通过如下方法获得该对象：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> application = <span class="type">UIApplication</span>.sharedApplication()</span><br></pre></td></tr></table></figure></p>
<p><strong>功能</strong>：可以进行一些应用级别的操作，比如：设置应用程序桌面图标上的消息数目提醒；设置联网指示器的可见性；设置状态栏等等。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">application.applicationIconBadgeNumber = <span class="number">12</span>;</span><br><span class="line">application.networkActivityIndicatorVisible = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure></p>
<p>以上是设置消息数目提醒和联网指示，设置状态栏稍显复杂，首先需要配置plist文件，添加View controller-based status bar，并且设置为NO，然后再用<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">application.statusBarHidden = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure></p>
<p>当然，传统设置状态栏的方法比较简单，通过当前控制器进行，如下设置就可以了。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">preferredStatusBarStyle</span><span class="params">()</span></span> -&gt; <span class="type">UIStatusBarStyle</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">UIStatusBarStyle</span>.<span class="type">LightContent</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">prefersStatusBarHidden</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>application还有其他的一些功能，比如从本程序跳转到safari打开网页，或者拨打电话、发邮件、短信等等。如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    UIButton* openBaidu = [[UIButton alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];</span><br><span class="line">    [openBaidu addTarget:self action:@selector(openBaidu) forControlEvents:UIControlEventTouchUpInside];</span><br><span class="line">    openBaidu.backgroundColor = [UIColor redColor];</span><br><span class="line">    [self.view addSubview:openBaidu];</span><br><span class="line">&#125;</span><br><span class="line">- (void)openBaidu &#123;</span><br><span class="line">// open web</span><br><span class="line">    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;https://google.com&quot;]];</span><br><span class="line">// call phone</span><br><span class="line">//    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;tel:10086&quot;]];</span><br><span class="line">// send message</span><br><span class="line">//    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;sms:10086&quot;]];</span><br><span class="line">// send email</span><br><span class="line">//    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;mailto:1072131128@qq.com&quot;]];</span><br><span class="line">// open other app</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>现在，基本上可以对UIApplication有个初步的认识了，那问题是，既然UIApplication是程序创建的第一个类，<strong>那么这个类是什么时候创建的呢？</strong>要解开这个问题，就必须去了解程序的启动原理。</p>
<p>点击app，程序启动，首先进入的是main函数，main函数直接执行UIApplicationMain函数，该函数定义如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UIKIT_EXTERN int UIApplicationMain(int argc, char *argv[], NSString * __nullable principalClassName, NSString * __nullable delegateClassName);</span><br></pre></td></tr></table></figure></p>
<p>前两个参数argc, argv可以忽略，不影响理解，第三个参数必须是UIApplication类或者其子类，工程默认为nil，这是代表默认为UIApplication，即自动创建UIApplication类（就在这里创建第一个UIApplication类）；第四个参数是要创建的delegate类的名字，即根据delegate class name创建一个代理类，将该代理类赋值给UIApplication中的delegate属性。在上面这些都完成后，就建立主运行循环(Main runloop)，进行事件处理，首先处理的事情是delegate的didFinishLaunchApplication方法。这个就是程序启动的基本原理。</p>
<p>讲完了UIApplication，现在来讲程序的代理，即appDelegate。所有移动操作系统都有一个致命的缺点：app很容易受到打扰，比如一个来电，或者不小心锁屏了，app都会进入后台，甚至被终止。这些需要设置appDelegate来处理。这里我假设读者都是有一定IOS开发经验的，我们可以模拟一下启动程序，点击home键回到桌面，再次启动程序，这三个过程，分别看看都调用了哪些代理函数。</p>
<p>程序启动:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions; </span><br><span class="line">- (void)applicationDidBecomeActive:(UIApplication *)application;</span><br></pre></td></tr></table></figure></p>
<p>回到home:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (void)applicationWillResignActive:(UIApplication *)application;</span><br><span class="line">- (void)applicationDidEnterBackground:(UIApplication *)application；</span><br></pre></td></tr></table></figure></p>
<p>再次回到程序：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (void)applicationWillEnterForeground:(UIApplication *)application;</span><br><span class="line">- (void)applicationDidBecomeActive:(UIApplication *)application；</span><br></pre></td></tr></table></figure></p>
<p>模拟完了这三个过程，并且track到了过程中先后调用的代理函数基本就可以对代理有个初步的认识了。</p>
<p>最后，我们来讲一下UIWindow和UIViewController。这里面的关系为：手机屏幕是一个screen，screen上放置UIWindow，然后各种view就放置在UIWidow上面，一层层累加。而UIViewController可以通过设置为window的rootViewController来达到控制监听事件的功能。</p>
<p>关于UIWindow一方面可以通过storyboard默认创建，然后程序会默认设置rootViewController和相应的view；另一方面也可以通过代码创建，在appDelegate中通过设置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];</span><br><span class="line">self.window.backgroundColor = [UIColor whiteColor];</span><br></pre></td></tr></table></figure></p>
<p>// window 设置为主窗口 并且可见<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[self.window makeKeyAndVisible];</span><br></pre></td></tr></table></figure></p>
<p>另外，把控制器vc的view显示到window上有两种方法。第一种是直接加view，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[self.window addSubview: vc.view];</span><br></pre></td></tr></table></figure></p>
<p>另外一种是加控制器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.window.rootViewController = vc;</span><br></pre></td></tr></table></figure></p>
<p>一般采用的都是后者。</p>
<p>PS:如果项目中包含main storyboard，则不需要再在appDelegate中alloc window，这是无用功。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IOS/">IOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mobile/">Mobile</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 Pengfei Xing
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>