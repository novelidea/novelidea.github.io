<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>analysis to bloom filter | 邢鹏飞的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="BRIEF INTRODUCTION
Bloom filter is a space efficient algorithm that can judge whether a record exists in a given record set. For example, FBI needs to judge whether a man is on the list of suspects; t">
<meta property="og:type" content="article">
<meta property="og:title" content="analysis to bloom filter">
<meta property="og:url" content="http://yoursite.com/2015/10/18/introduction-to-bloom-filter/index.html">
<meta property="og:site_name" content="邢鹏飞的博客">
<meta property="og:description" content="BRIEF INTRODUCTION
Bloom filter is a space efficient algorithm that can judge whether a record exists in a given record set. For example, FBI needs to judge whether a man is on the list of suspects; t">
<meta property="og:updated_time" content="2016-04-18T20:41:31.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="analysis to bloom filter">
<meta name="twitter:description" content="BRIEF INTRODUCTION
Bloom filter is a space efficient algorithm that can judge whether a record exists in a given record set. For example, FBI needs to judge whether a man is on the list of suspects; t">
  
    <link rel="alternative" href="/atom.xml" title="邢鹏飞的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="null" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Pengfei Xing</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">文章</a></li>
				        
							<li><a href="/tags/Mobile">移动开发</a></li>
				        
							<li><a href="/tags/FullStack">全栈</a></li>
				        
							<li><a href="/tags/System">系统</a></li>
				        
							<li><a href="/tags/Diary">随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/novelidea" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/2878470034/profile" title="weibo">weibo</a>
					        
								<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/pengfei-xing-65886578" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Algorithm/" style="font-size: 16.67px;">Algorithm</a> <a href="/tags/Backend/" style="font-size: 13.33px;">Backend</a> <a href="/tags/Diary/" style="font-size: 10px;">Diary</a> <a href="/tags/FullStack/" style="font-size: 15px;">FullStack</a> <a href="/tags/Game/" style="font-size: 10px;">Game</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/IOS/" style="font-size: 18.33px;">IOS</a> <a href="/tags/Java/" style="font-size: 11.67px;">Java</a> <a href="/tags/Mobile/" style="font-size: 20px;">Mobile</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/OOD/" style="font-size: 10px;">OOD</a> <a href="/tags/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tags/Scrappy/" style="font-size: 10px;">Scrappy</a> <a href="/tags/SpriteKit/" style="font-size: 13.33px;">SpriteKit</a> <a href="/tags/System/" style="font-size: 10px;">System</a> <a href="/tags/Unity/" style="font-size: 10px;">Unity</a> <a href="/tags/WatchOS/" style="font-size: 10px;">WatchOS</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Pengfei Xing</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="null" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Pengfei Xing</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">文章</a></li>
		        
					<li><a href="/tags/Mobile">移动开发</a></li>
		        
					<li><a href="/tags/FullStack">全栈</a></li>
		        
					<li><a href="/tags/System">系统</a></li>
		        
					<li><a href="/tags/Diary">随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/novelidea" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/2878470034/profile" title="weibo">weibo</a>
			        
						<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/pengfei-xing-65886578" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-introduction-to-bloom-filter" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/18/introduction-to-bloom-filter/" class="article-date">
  	<time datetime="2015-10-18T22:02:37.000Z" itemprop="datePublished">2015-10-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      analysis to bloom filter
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>BRIEF INTRODUCTION</strong></p>
<p>Bloom filter is a space efficient algorithm that can judge whether a record exists in a given record set. For example, FBI needs to judge whether a man is on the list of suspects; typing system needs to judge whether the word we are typing is correct - by computing that whether that word is in the word dictionary; email service provider, such as google, needs to judge whether a email is a spam mail - by recording the email sender who has been reported by others to send spam emails before.</p>
<p>Take filtering spam mail as an example, indeed, many other machine learning algorithms can be used in this aspect, but all these methods need to deep into the email content, which may cost a lot of time and memory space. Also, others may come with that hash function that can handle searching &amp; matching problems. We can build a blacklist of spam email sender and hash every email address in the set to a value. Then we can run in constant time to judge whether an email is spam email. However, hash method isn’t ‘space efficient’, which means it will need lots of memory to handle this problem considering the large amount of spam mail sender in the world. For example, if we assume there are 5 billion spam mail senders in the world and the space utility rate is 50% and each email address takes 8 Bytes. Then we can calculate the amount of the memory using hash function to handle this problem as follows:</p>
<p>[latex]5{\times}{10^9}{\times}8{\div}50{\%}Bytes=8{\times}{10^{10}}Bytes=745GB[/latex]</p>
<p>Actually, normal server doesn’t have such larger memory. Thus, it’s insane to apply hash method to this problem.</p>
<p>An alternative method or a method that can be combined with those machine learning methods is bloom filter, which is proposed by Burton Howard Bloom in 1970. It can be described as follows:</p>
<ol>
<li>Initialize a bit array [latex]M[/latex] with length <strong><em>m </em></strong>and set all the values to 0;</li>
<li>Build <strong><em>k</em></strong> hash functions;</li>
<li>Hash every record in the input set <strong><em>S</em></strong> for <strong><em>k</em></strong> times and we can get <strong><em>k</em></strong> values which represent <strong><em>k</em></strong> positions (p1, p2, p3,…, pk) of the bit array;</li>
<li><p>Set M[p1], M[p2], M[p3],…, M[pk] to 1.<br>Then, we finish building a bloom filter. And given a record, we can easily judge whether the record is in the set <strong><em>S </em></strong>as follows:</p>
</li>
<li><p>Hash the given record using the k hash functions and get <strong><em>k</em></strong> values V(v1, v2, v3,…, vk);</p>
</li>
<li>if for each M[vi] == 1 where vi belongs to V, then we can say this record is highly possibly in set <strong><em>S</em></strong>. Otherwise, we can say that this record is definitely not in set <strong><em>S</em></strong>.<br>Every coin has two sides. Bloom filter can judge whether a record is not in a given set or a record is <strong>highly possibly</strong> in a give set. That is why the False Negative of this algorithm is equal to zero, but the False Positive is not. We now analyse how to minimise the False Negative by choosing the appropriate value of  <em><strong>k</strong></em>.</li>
</ol>
<p><strong>MATHEMATIC ANALYSIS</strong></p>
<p>We assume we are given a bit array M of which length is m and the number of the set is n. Now after each hashing, the possibility of the value of a chosen position of M is still 0 is</p>
<p>[latex]1-\frac{1}{m}[/latex]</p>
<p>and after we hash one record for k times, the possibility of that is</p>
<p><a href="1-\frac{1}{m}">latex</a>^k[/latex]</p>
<p>and when we finish the initialization of bloom filter, the possibility changes to</p>
<p><a href="1-\frac{1}{m}">latex</a>^{kn}[/latex]</p>
<p>未完待续……</p>
<p>&nbsp;</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/10/24/IOS开发笔记（第三方框架篇）/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          IOS 开发笔记（第三方框架篇）
        
      </div>
    </a>
  
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="introduction-to-bloom-filter" data-title="analysis to bloom filter" data-url="http://yoursite.com/2015/10/18/introduction-to-bloom-filter/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Pengfei Xing
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>