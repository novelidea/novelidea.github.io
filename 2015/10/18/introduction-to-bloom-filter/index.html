<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>analysis to bloom filter | 邢鹏飞的博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">analysis to bloom filter</h1><a id="logo" href="/.">邢鹏飞的博客</a><p class="description">Make a difference</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 主页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">analysis to bloom filter</h1><div class="post-meta">Oct 18, 2015</div><div class="post-content"><p><strong>BRIEF INTRODUCTION</strong></p>
<p>Bloom filter is a space efficient algorithm that can judge whether a record exists in a given record set. For example, FBI needs to judge whether a man is on the list of suspects; typing system needs to judge whether the word we are typing is correct - by computing that whether that word is in the word dictionary; email service provider, such as google, needs to judge whether a email is a spam mail - by recording the email sender who has been reported by others to send spam emails before.</p>
<p>Take filtering spam mail as an example, indeed, many other machine learning algorithms can be used in this aspect, but all these methods need to deep into the email content, which may cost a lot of time and memory space. Also, others may come with that hash function that can handle searching &amp; matching problems. We can build a blacklist of spam email sender and hash every email address in the set to a value. Then we can run in constant time to judge whether an email is spam email. However, hash method isn’t ‘space efficient’, which means it will need lots of memory to handle this problem considering the large amount of spam mail sender in the world. For example, if we assume there are 5 billion spam mail senders in the world and the space utility rate is 50% and each email address takes 8 Bytes. Then we can calculate the amount of the memory using hash function to handle this problem as follows:</p>
<p>[latex]5{\times}{10^9}{\times}8{\div}50{\%}Bytes=8{\times}{10^{10}}Bytes=745GB[/latex]</p>
<p>Actually, normal server doesn’t have such larger memory. Thus, it’s insane to apply hash method to this problem.</p>
<p>An alternative method or a method that can be combined with those machine learning methods is bloom filter, which is proposed by Burton Howard Bloom in 1970. It can be described as follows:</p>
<ol>
<li>Initialize a bit array [latex]M[/latex] with length <strong><em>m </em></strong>and set all the values to 0;</li>
<li>Build <strong><em>k</em></strong> hash functions;</li>
<li>Hash every record in the input set <strong><em>S</em></strong> for <strong><em>k</em></strong> times and we can get <strong><em>k</em></strong> values which represent <strong><em>k</em></strong> positions (p1, p2, p3,…, pk) of the bit array;</li>
<li><p>Set M[p1], M[p2], M[p3],…, M[pk] to 1.<br>Then, we finish building a bloom filter. And given a record, we can easily judge whether the record is in the set <strong><em>S </em></strong>as follows:</p>
</li>
<li><p>Hash the given record using the k hash functions and get <strong><em>k</em></strong> values V(v1, v2, v3,…, vk);</p>
</li>
<li>if for each M[vi] == 1 where vi belongs to V, then we can say this record is highly possibly in set <strong><em>S</em></strong>. Otherwise, we can say that this record is definitely not in set <strong><em>S</em></strong>.<br>Every coin has two sides. Bloom filter can judge whether a record is not in a given set or a record is <strong>highly possibly</strong> in a give set. That is why the False Negative of this algorithm is equal to zero, but the False Positive is not. We now analyse how to minimise the False Negative by choosing the appropriate value of  <em><strong>k</strong></em>.</li>
</ol>
<p><strong>MATHEMATIC ANALYSIS</strong></p>
<p>We assume we are given a bit array M of which length is m and the number of the set is n. Now after each hashing, the possibility of the value of a chosen position of M is still 0 is</p>
<p>[latex]1-\frac{1}{m}[/latex]</p>
<p>and after we hash one record for k times, the possibility of that is</p>
<p><a href="1-\frac{1}{m}">latex</a>^k[/latex]</p>
<p>and when we finish the initialization of bloom filter, the possibility changes to</p>
<p><a href="1-\frac{1}{m}">latex</a>^{kn}[/latex]</p>
<p>未完待续……</p>
<p>&nbsp;</p>
</div><div class="tags"><a href="/tags/Algorithm/">Algorithm</a></div><div class="post-nav"><a class="pre" href="/2015/10/24/IOS开发笔记（第三方框架篇）/">IOS 开发笔记（第三方框架篇）</a><a class="next" href="/2015/01/09/google-onsite/">google onsite</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/SpriteKit/" style="font-size: 15px;">SpriteKit</a> <a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/FullStack/" style="font-size: 15px;">FullStack</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/IOS/" style="font-size: 15px;">IOS</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Scrappy/" style="font-size: 15px;">Scrappy</a> <a href="/tags/Backend/" style="font-size: 15px;">Backend</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a> <a href="/tags/Mobile/" style="font-size: 15px;">Mobile</a> <a href="/tags/Cheet-Sheet/" style="font-size: 15px;">Cheet Sheet</a> <a href="/tags/WatchOS/" style="font-size: 15px;">WatchOS</a> <a href="/tags/Unity/" style="font-size: 15px;">Unity</a> <a href="/tags/Game/" style="font-size: 15px;">Game</a> <a href="/tags/Diary/" style="font-size: 15px;">Diary</a> <a href="/tags/系统/" style="font-size: 15px;">系统</a> <a href="/tags/System/" style="font-size: 15px;">System</a> <a href="/tags/OOD/" style="font-size: 15px;">OOD</a> <a href="/tags/RESTful/" style="font-size: 15px;">RESTful</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/01/01/写在岁末年初（2016）/">写在岁末年初（2016）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/18/Algorithm-Exercise-7/">Algorithm Exercise 7(Lyft)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/15/hash相关/">hash相关</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/14/Java死锁例子/">Java死锁例子</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/14/Java中abstract和interface区别/">Java中abstract和interface区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/11/Algorithm-Exercise-6/">Algorithm Exercise 6</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/01/Algorithm-Exercise-5/">Algorithm Exercise 5</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/30/Algorithm-Exercise-4/">Algorithm Exercise 4</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/29/Algorithm-Exercise-3/">Algorithm Exercise 3</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/28/Algorithm-Exercise-2/">Algorithm Exercise 2</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">邢鹏飞的博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>